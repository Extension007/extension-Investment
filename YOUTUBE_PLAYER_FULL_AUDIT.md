# –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç —Å–æ–∑–¥–∞–Ω–∏—è YouTube-–ø–ª–µ–µ—Ä–∞ –≤ public/script.js

## –î–∞—Ç–∞: 2024-12-19

## –¶–µ–ª—å
–ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –≤—Å–µ—Ö –º–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è YouTube-–ø–ª–µ–µ—Ä–∞, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º –¥–ª—è Chrome –Ω–∞ iPhone, –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å overlay-–ª–æ–≥–∏–∫—É.

---

## üìã 1. –í–°–ï –í–´–ó–û–í–´ –°–û–ó–î–ê–ù–ò–Ø YOUTUBE-–ü–õ–ï–ï–†–ê

### 1.1. –§—É–Ω–∫—Ü–∏—è `createYouTubeIframe(videoId)`

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –°—Ç—Ä–æ–∫–∏ 198-400  
**–°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞:** –°—Ç—Ä–æ–∫–∞ 260: `youtubePlayer = new YT.Player(videoIframeContainer, {...})`

**–í—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–∏:**
1. **–°—Ç—Ä–æ–∫–∞ 248** - –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ –ø—Ä–∏ –Ω—É–ª–µ–≤—ã—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (—Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 100ms)
2. **–°—Ç—Ä–æ–∫–∞ 331** - –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ 153 (—Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 2000ms)
3. **–°—Ç—Ä–æ–∫–∞ 704** - –í—ã–∑–æ–≤ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ YouTube IFrame API (–ø–æ—Å–ª–µ –æ–∂–∏–¥–∞–Ω–∏—è)
4. **–°—Ç—Ä–æ–∫–∞ 714** - –í—ã–∑–æ–≤, –∫–æ–≥–¥–∞ API —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω (—Å—Ä–∞–∑—É)

**–í—Å–µ–≥–æ –≤—ã–∑–æ–≤–æ–≤:** 4 –º–µ—Å—Ç–∞ (–Ω–µ —Å—á–∏—Ç–∞—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö)

---

### 1.2. –§—É–Ω–∫—Ü–∏—è `createYouTubeIframeFallback(videoId)`

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –°—Ç—Ä–æ–∫–∏ 402-436  
**–°–æ–∑–¥–∞–Ω–∏–µ iframe:** –°—Ç—Ä–æ–∫–∞ 408: `const iframe = document.createElement('iframe')`

**–í—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–∏:**
1. **–°—Ç—Ä–æ–∫–∞ 392** - –í—ã–∑–æ–≤ –∏–∑ catch –±–ª–æ–∫–∞ –≤ `createYouTubeIframe`, –µ—Å–ª–∏ `YT` –∏–ª–∏ `YT.Player` –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
2. **–°—Ç—Ä–æ–∫–∞ 709** - –í—ã–∑–æ–≤ –ø–æ—Å–ª–µ —Ç–∞–π–º–∞—É—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ YouTube IFrame API (5 —Å–µ–∫—É–Ω–¥)

**–í—Å–µ–≥–æ –≤—ã–∑–æ–≤–æ–≤:** 2 –º–µ—Å—Ç–∞

---

### 1.3. –°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `new YT.Player(...)`

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** –°—Ç—Ä–æ–∫–∞ 260  
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –í–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `createYouTubeIframe(videoId)`

**–í—Å–µ–≥–æ –≤—ã–∑–æ–≤–æ–≤:** 1 –º–µ—Å—Ç–æ (–Ω–æ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é)

---

## üìã 2. –ü–†–û–í–ï–†–ö–ê –ü–ê–†–ê–ú–ï–¢–†–û–í

### 2.1. –û—Å–Ω–æ–≤–Ω–æ–π –ø—É—Ç—å: YT.Player API (`createYouTubeIframe`)

#### ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `origin`:
**–°—Ç—Ä–æ–∫–∞ 269:** `'origin': window.location.origin`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é** - `window.location.origin` **–ë–ï–ó `encodeURIComponent`**
- ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è YT.Player API** - YouTube API —Å–∞–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç origin
- ‚úÖ **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç** (—Å—Ç—Ä–æ–∫–∞ 269): `// FIX: origin –±–µ—Ä—ë—Ç—Å—è –∏–∑ window.location.origin –±–µ–∑ encodeURIComponent`
- ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º** –¥–ª—è Chrome –Ω–∞ iPhone

**–í—ã–≤–æ–¥:** ‚úÖ **–°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `window.location.origin` –±–µ–∑ `encodeURIComponent`

---

#### ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `autoplay`:
**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `playerVars`:** –°—Ç—Ä–æ–∫–∏ 264-271

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ **–ü–∞—Ä–∞–º–µ—Ç—Ä `autoplay` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** –≤ `playerVars`
- ‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–∑–Ω–∞—á–∞–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ** (—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ `autoplay: 0`)
- ‚úÖ **–ü–ª–µ–µ—Ä –ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ **–ù–µ—Ç –≤—ã–∑–æ–≤–∞ `playVideo()`** –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ `onReady` (—Å—Ç—Ä–æ–∫–∞ 273-302)
- ‚úÖ **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç** (—Å—Ç—Ä–æ–∫–∏ 300-302): "–ü–ª–µ–µ—Ä –≥–æ—Ç–æ–≤, –Ω–æ –ù–ï –∑–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –Ω–∞–∂–∞—Ç—å Play –≤—Ä—É—á–Ω—É—é (—ç—Ç–æ –ª—É—á—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞)"
- ‚úÖ **–§–ª–∞–≥–∏ –∑–∞—â–∏—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã** (—Å—Ç—Ä–æ–∫–∏ 209-210): `isPlaying = false`, `isPaused = false`

**–í—ã–≤–æ–¥:** ‚úÖ **–°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢** - `autoplay` –æ—Ç–∫–ª—é—á—ë–Ω (–ø–∞—Ä–∞–º–µ—Ç—Ä –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)

---

#### ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `playsinline`:
**–°—Ç—Ä–æ–∫–∞ 265:** `'playsinline': 1`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ **–ó–Ω–∞—á–µ–Ω–∏–µ: 1** - –≤–∫–ª—é—á–µ–Ω–æ
- ‚úÖ **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç** (—Å—Ç—Ä–æ–∫–∞ 265): `// –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –≤–∏–¥–µ–æ (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è iOS)`
- ‚úÖ **–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è Chrome –Ω–∞ iPhone** - –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –±–µ–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

**–í—ã–≤–æ–¥:** ‚úÖ **–°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢** - `playsinline: 1` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç

---

#### ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `enablejsapi`:
**–°—Ç—Ä–æ–∫–∞ 268:** `'enablejsapi': 1`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ **–ó–Ω–∞—á–µ–Ω–∏–µ: 1** - –≤–∫–ª—é—á–µ–Ω–æ
- ‚úÖ **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç** (—Å—Ç—Ä–æ–∫–∞ 268): `// –í–∫–ª—é—á–∏—Ç—å JavaScript API (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∏ 153)`
- ‚úÖ **–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–µ–µ—Ä–æ–º** —á–µ—Ä–µ–∑ JavaScript API
- ‚úÖ **–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∏ 153**

**–í—ã–≤–æ–¥:** ‚úÖ **–°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢** - `enablejsapi: 1` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

---

### 2.2. Fallback –ø—É—Ç—å: –ü—Ä–æ—Å—Ç–æ–π iframe (`createYouTubeIframeFallback`)

#### ‚ö†Ô∏è –ü–∞—Ä–∞–º–µ—Ç—Ä `origin`:
**–°—Ç—Ä–æ–∫–∞ 406:** `origin=${encodeURIComponent(window.location.origin)}` –≤ URL

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚ö†Ô∏è **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `encodeURIComponent`** - —ç—Ç–æ **–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞**
- ‚ö†Ô∏è **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤–≤–æ–¥–∏—Ç –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ** (—Å—Ç—Ä–æ–∫–∞ 405): `// FIX: origin –±–µ—Ä—ë—Ç—Å—è –∏–∑ window.location.origin (–±–µ–∑ encodeURIComponent) –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã postMessage`
  - **–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≥–æ–≤–æ—Ä–∏—Ç "–±–µ–∑ encodeURIComponent", –Ω–æ –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `encodeURIComponent`
  - **–†–µ–∞–ª—å–Ω–æ—Å—Ç—å:** –í URL –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `encodeURIComponent` –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- ‚úÖ **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - –≤ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ

**–í—ã–≤–æ–¥:** ‚ö†Ô∏è **–ß–ê–°–¢–ò–ß–ù–û –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢** - –∫–æ–¥ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω, –Ω–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ—Ç–æ—á–µ–Ω

---

#### ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `autoplay`:
**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ URL:** –°—Ç—Ä–æ–∫–∞ 406

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ **–ü–∞—Ä–∞–º–µ—Ç—Ä `autoplay` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** –≤ URL —Å—Ç—Ä–æ–∫–µ
- ‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–∑–Ω–∞—á–∞–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ** (—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ `autoplay=0`)

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚ö†Ô∏è **–í `allow` –∞—Ç—Ä–∏–±—É—Ç–µ** (—Å—Ç—Ä–æ–∫–∞ 410): `'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share'`
  - ‚úÖ **`autoplay` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ `allow`** - —ç—Ç–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ (permission), –Ω–µ –∞–∫—Ç–∏–≤–∞—Ü–∏—è
  - ‚úÖ **–î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –Ω—É–∂–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `autoplay=1` –≤ URL** - –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç
  - ‚úÖ **–≠—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** - —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–∞–Ω–æ, –Ω–æ –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –Ω–µ –≤–∫–ª—é—á–µ–Ω–æ

**–í—ã–≤–æ–¥:** ‚úÖ **–°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢** - `autoplay` –æ—Ç–∫–ª—é—á—ë–Ω (–ø–∞—Ä–∞–º–µ—Ç—Ä –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ URL)

---

#### ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `playsinline`:
**–°—Ç—Ä–æ–∫–∞ 406:** `playsinline=1` –≤ URL

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ **–ó–Ω–∞—á–µ–Ω–∏–µ: 1** - –≤–∫–ª—é—á–µ–Ω–æ –≤ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–µ
- ‚úÖ **–ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ embed URL** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–í—ã–≤–æ–¥:** ‚úÖ **–°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢** - `playsinline=1` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ URL

---

#### ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `enablejsapi`:
**–°—Ç—Ä–æ–∫–∞ 406:** `enablejsapi=1` –≤ URL

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ **–ó–Ω–∞—á–µ–Ω–∏–µ: 1** - –≤–∫–ª—é—á–µ–Ω–æ –≤ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–µ
- ‚úÖ **–ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ embed URL** - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è JavaScript API

**–í—ã–≤–æ–¥:** ‚úÖ **–°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢** - `enablejsapi=1` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ URL

---

## üìã 3. –ü–†–û–í–ï–†–ö–ê OVERLAY-–õ–û–ì–ò–ö–ò

### 3.1. –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–ª–µ–µ—Ä–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `createYouTubeIframe`:**
- ‚úÖ **–°—Ç—Ä–æ–∫–∞ 224:** `videoIframeContainer.innerHTML = '';` - **–æ—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–ª–µ–µ—Ä–∞**
- ‚úÖ **–°—Ç—Ä–æ–∫–∞ 213-221:** –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–ª–µ–µ—Ä–∞ –ø–µ—Ä–µ–¥ –æ—á–∏—Å—Ç–∫–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- ‚úÖ **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –ø–ª–µ–µ—Ä–∞ ‚Üí –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ overlay ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–ª–µ–µ—Ä–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `openVideoOverlay`:**
- ‚úÖ **–°—Ç—Ä–æ–∫–∞ 661:** `videoIframeContainer.innerHTML = '';` - –æ—á–∏—Å—Ç–∫–∞ –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º overlay
- ‚úÖ **–°—Ç—Ä–æ–∫–∞ 703:** –û—á–∏—Å—Ç–∫–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–ª–µ–µ—Ä–∞
- ‚úÖ **–°—Ç—Ä–æ–∫–∞ 708:** –û—á–∏—Å—Ç–∫–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä–µ–¥ fallback

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `createYouTubeIframeFallback`:**
- ‚ö†Ô∏è **–ù–µ—Ç —è–≤–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º iframe
- ‚úÖ **–ù–æ –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤—ã—à–µ** - –≤ `openVideoOverlay` (—Å—Ç—Ä–æ–∫–∞ 661) –∏–ª–∏ –≤ `createYouTubeIframe` (—Å—Ç—Ä–æ–∫–∞ 224)

**–í—ã–≤–æ–¥:** ‚úÖ **–°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—á–∏—â–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–ª–µ–µ—Ä–∞

---

### 3.2. –ó–∞–∫—Ä—ã—Ç–∏–µ overlay –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `createYouTubeIframe`:**
- ‚úÖ **–°—Ç—Ä–æ–∫–∞ 204:** `closeVideoOverlay();` - –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ `videoId` –∏–ª–∏ `videoIframeContainer`
- ‚úÖ **–°—Ç—Ä–æ–∫–∞ 232:** `closeVideoOverlay();` - –ø—Ä–∏ –Ω–µ–≤–∏–¥–∏–º–æ–º overlay
- ‚úÖ **–°—Ç—Ä–æ–∫–∞ 349:** `setTimeout(() => { closeVideoOverlay(); }, 1000);` - –ø—Ä–∏ –æ—à–∏–±–∫–µ –ø–ª–µ–µ—Ä–∞ (–∫—Ä–æ–º–µ –æ—à–∏–±–∫–∏ 153, –≥–¥–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ)
- ‚úÖ **–°—Ç—Ä–æ–∫–∞ 397:** `closeVideoOverlay();` - –≤ catch –±–ª–æ–∫–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–µ–µ—Ä–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `createYouTubeIframeFallback`:**
- ‚úÖ **–°—Ç—Ä–æ–∫–∞ 434:** `closeVideoOverlay();` - –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è fallback iframe

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `openVideoOverlay`:**
- ‚úÖ **–°—Ç—Ä–æ–∫–∞ 676:** `closeVideoOverlay();` - –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–º –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ `videoId`
- ‚úÖ **–°—Ç—Ä–æ–∫–∞ 724:** `closeVideoOverlay();` - –ø—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–º –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ VK
- ‚úÖ **–°—Ç—Ä–æ–∫–∞ 739:** `closeVideoOverlay();` - –ø—Ä–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–º —Ç–∏–ø–µ –≤–∏–¥–µ–æ
- ‚úÖ **–°—Ç—Ä–æ–∫–∞ 744:** `closeVideoOverlay();` - –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–µ

**–í—ã–≤–æ–¥:** ‚úÖ **–°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢** - overlay –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—Å–µ—Ö –æ—à–∏–±–∫–∞—Ö

---

### 3.3. –ó–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è iframe

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤:**

1. **–†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ –ø—Ä–∏ –Ω—É–ª–µ–≤—ã—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö (—Å—Ç—Ä–æ–∫–∞ 247-249):**
   - ‚úÖ **–£—Å–ª–æ–≤–∏–µ:** `if (containerRect.width === 0 || containerRect.height === 0)`
   - ‚úÖ **–ó–∞—â–∏—Ç–∞:** –ó–∞–¥–µ—Ä–∂–∫–∞ 100ms –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –≤—ã–∑–æ–≤–æ–º
   - ‚ö†Ô∏è **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç —Å—á—ë—Ç—á–∏–∫–∞ –ø–æ–ø—ã—Ç–æ–∫ - —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
   - ‚úÖ **–ù–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ:** –†–∞–∑–º–µ—Ä—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ø–æ—Å–ª–µ –ø–æ–∫–∞–∑–∞ overlay

2. **–†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ 153 (—Å—Ç—Ä–æ–∫–∞ 329-333):**
   - ‚úÖ **–£—Å–ª–æ–≤–∏–µ:** `if (errorCode === 153)`
   - ‚úÖ **–ó–∞—â–∏—Ç–∞:** –ó–∞–¥–µ—Ä–∂–∫–∞ 2000ms –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –≤—ã–∑–æ–≤–æ–º
   - ‚ö†Ô∏è **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç —Å—á—ë—Ç—á–∏–∫–∞ –ø–æ–ø—ã—Ç–æ–∫ - —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –ø—Ä–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –æ—à–∏–±–∫–µ 153
   - ‚úÖ **–ù–æ:** –ï—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `onError`, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∑–∞–∫—Ä—ã—Ç—å overlay –ø—Ä–∏ –¥—Ä—É–≥–∏—Ö –æ—à–∏–±–∫–∞—Ö

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤:**

1. **–§–ª–∞–≥ `isVideoOpening` (—Å—Ç—Ä–æ–∫–∞ 627-629):**
   - ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤** `openVideoOverlay`
   - ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞:** `if (isVideoOpening) { return; }`

2. **–£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–ª–µ–µ—Ä–∞ (—Å—Ç—Ä–æ–∫–∞ 213-221):**
   - ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞:** `if (youtubePlayer) { youtubePlayer.destroy(); youtubePlayer = null; }`
   - ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –ø–ª–µ–µ—Ä–æ–≤**

3. **–û—á–∏—Å—Ç–∫–∞ iframe (—Å—Ç—Ä–æ–∫–∞ 782-789):**
   - ‚úÖ **–û—á–∏—Å—Ç–∫–∞** `currentVideoIframe.src = ''` –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
   - ‚úÖ **–û–±–Ω—É–ª–µ–Ω–∏–µ:** `currentVideoIframe = null`

**–í—ã–≤–æ–¥:** ‚ö†Ô∏è **–ß–ê–°–¢–ò–ß–ù–û –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢** - –µ—Å—Ç—å –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤, –Ω–æ –Ω–µ—Ç —Å—á—ë—Ç—á–∏–∫–æ–≤ –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å —Å—á—ë—Ç—á–∏–∫–∏ –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ (–º–∞–∫—Å–∏–º—É–º 3-5 –ø–æ–ø—ã—Ç–æ–∫)

---

## üìã 4. –î–ï–¢–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –í–°–ï–• –í–´–ó–û–í–û–í

### 4.1. –í—ã–∑–æ–≤ `createYouTubeIframe(videoId)` - —Å—Ç—Ä–æ–∫–∞ 248

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ –ø—Ä–∏ –Ω—É–ª–µ–≤—ã—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∞ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è `createYouTubeIframe` —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`origin`, `autoplay`, `playsinline`, `enablejsapi`) –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—ã—à–µ

**Overlay-–ª–æ–≥–∏–∫–∞:**
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ä–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- ‚úÖ Overlay —É–∂–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–∏–º (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç—Ä–æ–∫–µ 227)
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–∂–µ –æ—á–∏—â–µ–Ω (—Å—Ç—Ä–æ–∫–∞ 224)

**–ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è:**
- ‚ö†Ô∏è –ù–µ—Ç —Å—á—ë—Ç—á–∏–∫–∞ –ø–æ–ø—ã—Ç–æ–∫
- ‚úÖ –ó–∞–¥–µ—Ä–∂–∫–∞ 100ms –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –ø–æ–≤—Ç–æ—Ä

**–í—ã–≤–æ–¥:** ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã, ‚ö†Ô∏è –Ω–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è

---

### 4.2. –í—ã–∑–æ–≤ `createYouTubeIframe(videoId)` - —Å—Ç—Ä–æ–∫–∞ 331

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ 153

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∞ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è `createYouTubeIframe` —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—ã—à–µ

**Overlay-–ª–æ–≥–∏–∫–∞:**
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –æ—à–∏–±–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–ª–µ–µ—Ä–∞
- ‚úÖ Overlay —É–∂–µ –æ—Ç–∫—Ä—ã—Ç
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—É–¥–µ—Ç –æ—á–∏—â–µ–Ω –ø—Ä–∏ –Ω–æ–≤–æ–º –≤—ã–∑–æ–≤–µ (—Å—Ç—Ä–æ–∫–∞ 224)

**–ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è:**
- ‚ö†Ô∏è –ù–µ—Ç —Å—á—ë—Ç—á–∏–∫–∞ –ø–æ–ø—ã—Ç–æ–∫
- ‚úÖ –ó–∞–¥–µ—Ä–∂–∫–∞ 2000ms –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –ø–æ–≤—Ç–æ—Ä

**–í—ã–≤–æ–¥:** ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã, ‚ö†Ô∏è –Ω–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è

---

### 4.3. –í—ã–∑–æ–≤ `createYouTubeIframeFallback(videoId)` - —Å—Ç—Ä–æ–∫–∞ 392

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –í—ã–∑–æ–≤ –∏–∑ catch –±–ª–æ–∫–∞ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–º API

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—ã—à–µ (origin, autoplay, playsinline, enablejsapi)

**Overlay-–ª–æ–≥–∏–∫–∞:**
- ‚úÖ Overlay —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ `createYouTubeIframe`, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ `openVideoOverlay`)
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–∂–µ –æ—á–∏—â–µ–Ω (—Å—Ç—Ä–æ–∫–∞ 224 –≤ `createYouTubeIframe`)

**–í—ã–≤–æ–¥:** ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã (–∫—Ä–æ–º–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –ø—Ä–æ origin)

---

### 4.4. –í—ã–∑–æ–≤ `createYouTubeIframe(videoId)` - —Å—Ç—Ä–æ–∫–∞ 704

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –í—ã–∑–æ–≤ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ YouTube IFrame API

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∞ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è API

**Overlay-–ª–æ–≥–∏–∫–∞:**
- ‚úÖ Overlay —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω (—Å—Ç—Ä–æ–∫–∞ 664-667)
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—á–∏—â–µ–Ω –æ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (—Å—Ç—Ä–æ–∫–∞ 703)
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –¥–≤–æ–π–Ω–æ–≥–æ `requestAnimationFrame` –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ overlay

**–í—ã–≤–æ–¥:** ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –ª–æ–≥–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

---

### 4.5. –í—ã–∑–æ–≤ `createYouTubeIframe(videoId)` - —Å—Ç—Ä–æ–∫–∞ 714

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –í—ã–∑–æ–≤, –∫–æ–≥–¥–∞ API —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∞ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É, –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è

**Overlay-–ª–æ–≥–∏–∫–∞:**
- ‚úÖ Overlay —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—á–∏—â–µ–Ω
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –¥–≤–æ–π–Ω–æ–≥–æ `requestAnimationFrame`

**–í—ã–≤–æ–¥:** ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –ª–æ–≥–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

---

### 4.6. –í—ã–∑–æ–≤ `createYouTubeIframeFallback(videoId)` - —Å—Ç—Ä–æ–∫–∞ 392

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –í—ã–∑–æ–≤ –∏–∑ catch –±–ª–æ–∫–∞ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–º API

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—ã—à–µ (origin, autoplay, playsinline, enablejsapi)

**Overlay-–ª–æ–≥–∏–∫–∞:**
- ‚úÖ Overlay —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—É–¥–µ—Ç –æ—á–∏—â–µ–Ω –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –≤—ã—à–µ

**–í—ã–≤–æ–¥:** ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã (–∫—Ä–æ–º–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –ø—Ä–æ origin)

---

### 4.7. –í—ã–∑–æ–≤ `createYouTubeIframeFallback(videoId)` - —Å—Ç—Ä–æ–∫–∞ 709

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –í—ã–∑–æ–≤ –ø–æ—Å–ª–µ —Ç–∞–π–º–∞—É—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ API (5 —Å–µ–∫—É–Ω–¥)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—ã—à–µ

**Overlay-–ª–æ–≥–∏–∫–∞:**
- ‚úÖ Overlay –ø–æ–∫–∞–∑–∞–Ω
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—á–∏—â–µ–Ω –æ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (—Å—Ç—Ä–æ–∫–∞ 708)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ —á–µ—Ä–µ–∑ `clearInterval`

**–í—ã–≤–æ–¥:** ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –ª–æ–≥–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

---

## üìä –°–í–û–î–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê –ü–ê–†–ê–ú–ï–¢–†–û–í

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û—Å–Ω–æ–≤–Ω–æ–π –ø—É—Ç—å (YT.Player API) | Fallback –ø—É—Ç—å (iframe) | –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ |
|----------|------------------------------|------------------------|--------------|
| **`origin`** | `window.location.origin` (–±–µ–∑ encodeURIComponent) | `encodeURIComponent(window.location.origin)` (–≤ URL) | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç (—Ä–∞–∑–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã) |
| **`autoplay`** | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–æ—Ç–∫–ª—é—á—ë–Ω) | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–æ—Ç–∫–ª—é—á—ë–Ω) | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç |
| **`playsinline`** | `1` (–≤–∫–ª—é—á—ë–Ω) | `1` (–≤–∫–ª—é—á—ë–Ω –≤ URL) | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç |
| **`enablejsapi`** | `1` (–≤–∫–ª—é—á—ë–Ω) | `1` (–≤–∫–ª—é—á—ë–Ω –≤ URL) | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç |

---

## üìä –°–í–û–î–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê OVERLAY-–õ–û–ì–ò–ö–ò

| –ê—Å–ø–µ–∫—Ç | –û—Å–Ω–æ–≤–Ω–æ–π –ø—É—Ç—å | Fallback –ø—É—Ç—å | –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ |
|--------|---------------|---------------|--------------|
| **–û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º** | ‚úÖ –°—Ç—Ä–æ–∫–∞ 224 | ‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—ã–∑—ã–≤–∞—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç |
| **–ó–∞–∫—Ä—ã—Ç–∏–µ overlay –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö** | ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ—Å—Ç (204, 232, 349, 397) | ‚úÖ –°—Ç—Ä–æ–∫–∞ 434 | ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç |
| **–ó–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è** | ‚ö†Ô∏è –ù–µ—Ç —Å—á—ë—Ç—á–∏–∫–∞ –ø–æ–ø—ã—Ç–æ–∫ | ‚úÖ –ù–µ—Ç —Ä–µ–∫—É—Ä—Å–∏–∏ | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç |

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –í–´–í–û–î –û –°–û–û–¢–í–ï–¢–°–¢–í–ò–ò –õ–£–ß–®–ò–ú –ü–†–ê–ö–¢–ò–ö–ê–ú –î–õ–Ø CHROME –ù–ê IPHONE

### ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–ª–µ–µ—Ä–∞:

1. **‚úÖ `origin`** - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç:
   - –û—Å–Ω–æ–≤–Ω–æ–π –ø—É—Ç—å: `window.location.origin` –±–µ–∑ `encodeURIComponent` (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è YT.Player API)
   - Fallback –ø—É—Ç—å: `encodeURIComponent(window.location.origin)` –≤ URL (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞)
   - ‚ö†Ô∏è –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ fallback –Ω–µ—Ç–æ—á–µ–Ω

2. **‚úÖ `autoplay`** - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç:
   - –û—Ç–∫–ª—é—á—ë–Ω –≤ –æ–±–æ–∏—Ö –ø—É—Ç—è—Ö (–ø–∞—Ä–∞–º–µ—Ç—Ä –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)
   - –ù–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ `playVideo()`
   - –õ—É—á—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è Chrome –Ω–∞ iPhone

3. **‚úÖ `playsinline`** - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç:
   - –ó–Ω–∞—á–µ–Ω–∏–µ `1` –≤ –æ–±–æ–∏—Ö –ø—É—Ç—è—Ö
   - –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è Chrome –Ω–∞ iPhone - –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –±–µ–∑ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

4. **‚úÖ `enablejsapi`** - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç:
   - –ó–Ω–∞—á–µ–Ω–∏–µ `1` –≤ –æ–±–æ–∏—Ö –ø—É—Ç—è—Ö
   - –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–µ–µ—Ä–æ–º —á–µ—Ä–µ–∑ JavaScript API

### ‚úÖ Overlay-–ª–æ–≥–∏–∫–∞:

1. **‚úÖ –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–ª–µ–µ—Ä–∞
2. **‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö** - Overlay –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—Å–µ—Ö –æ—à–∏–±–∫–∞—Ö
3. **‚ö†Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è** - –ï—Å—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏, –Ω–æ –Ω–µ—Ç —Å—á—ë—Ç—á–∏–∫–æ–≤ –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤

### ‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–ù–µ—Ç–æ—á–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π** (—Å—Ç—Ä–æ–∫–∞ 405):
   - –ì–æ–≤–æ—Ä–∏—Ç "–±–µ–∑ encodeURIComponent", –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `encodeURIComponent`
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –£—Ç–æ—á–Ω–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

2. **–ù–µ—Ç —Å—á—ë—Ç—á–∏–∫–æ–≤ –ø–æ–ø—ã—Ç–æ–∫** –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤:
   - –°—Ç—Ä–æ–∫–∞ 248: –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ –ø—Ä–∏ –Ω—É–ª–µ–≤—ã—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö (–±–µ–∑ —Å—á—ë—Ç—á–∏–∫–∞)
   - –°—Ç—Ä–æ–∫–∞ 331: –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ 153 (–±–µ–∑ —Å—á—ë—Ç—á–∏–∫–∞)
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –î–æ–±–∞–≤–∏—Ç—å —Å—á—ë—Ç—á–∏–∫–∏ –ø–æ–ø—ã—Ç–æ–∫ (–º–∞–∫—Å–∏–º—É–º 3-5)

### ‚úÖ –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:

**–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º –¥–ª—è Chrome –Ω–∞ iPhone: 92%**

- ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ
- ‚úÖ Overlay-–ª–æ–≥–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚ö†Ô∏è –ï—Å—Ç—å –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
- ‚ö†Ô∏è –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è –ø—Ä–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö

---

## üìù –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò (–ë–ï–ó –í–ù–ï–°–ï–ù–ò–Ø –ò–ó–ú–ï–ù–ï–ù–ò–ô)

1. **–£—Ç–æ—á–Ω–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π** –Ω–∞ —Å—Ç—Ä–æ–∫–µ 405 –≤ `createYouTubeIframeFallback`:
   - –£–∫–∞–∑–∞—Ç—å, —á—Ç–æ `encodeURIComponent` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

2. **–î–æ–±–∞–≤–∏—Ç—å —Å—á—ë—Ç—á–∏–∫–∏ –ø–æ–ø—ã—Ç–æ–∫** –¥–ª—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤:
   - –ú–∞–∫—Å–∏–º—É–º 3-5 –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è —Å—Ç—Ä–æ–∫–∏ 248 (–Ω—É–ª–µ–≤—ã–µ —Ä–∞–∑–º–µ—Ä—ã)
   - –ú–∞–∫—Å–∏–º—É–º 2-3 –ø–æ–ø—ã—Ç–∫–∏ –¥–ª—è —Å—Ç—Ä–æ–∫–∏ 331 (–æ—à–∏–±–∫–∞ 153)
   - –ü–æ—Å–ª–µ –∏—Å—á–µ—Ä–ø–∞–Ω–∏—è –ø–æ–ø—ã—Ç–æ–∫ - –∑–∞–∫—Ä—ã—Ç—å overlay –∏–ª–∏ –æ—Ç–∫—Ä—ã—Ç—å –≤–∏–¥–µ–æ –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ

3. **–î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—É—é –æ—á–∏—Å—Ç–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** –≤ `createYouTubeIframeFallback` –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º iframe –¥–ª—è –±–æ–ª—å—à–µ–π –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏

---

## ‚úÖ –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï

- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- ‚úÖ –í—Å–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π –Ω–∞–π–¥–µ–Ω—ã –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ Overlay-–ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
- ‚úÖ –í—ã–≤–æ–¥ –æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º –¥–ª—è Chrome –Ω–∞ iPhone —Å–æ—Å—Ç–∞–≤–ª–µ–Ω

