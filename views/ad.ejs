<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–†–µ–∫–ª–∞–º–∞ ‚Äî Albamount</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <meta name="csrf-token" content="<%= typeof csrfToken !== 'undefined' ? csrfToken : '' %>">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css?v=1.0.1">
  <link rel="stylesheet" href="/header-tabs.css?v=1.0.1">
</head>
<body>
  <div id="bg-animated" aria-hidden="true"></div>
  <!-- –û–¥–Ω–æ—ç—Ç–∞–∂–Ω—ã–π header –±–µ–∑ –≤–∫–ª–∞–¥–æ–∫ -->
  <header class="main-header">
    <div class="container header-inner">
      <a class="logo" href="/"><img src="/albamount.png" alt="ALBAMOUNT" class="logo-img"></a>
      <div class="header-actions">
        <% if (isAuth) { %>
          <% if (isAdmin) { %>
            <a class="btn outline" href="/admin">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
          <% } else { %>
            <a class="btn outline" href="/cabinet">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
          <% } %>
        <% } else { %>
          <a class="btn outline" href="/user/login">–í—Ö–æ–¥</a>
          <button id="openRegister" type="button" class="btn outline">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        <% } %>
      </div>
    </div>
  </header>

  <main>
    <!-- –û–°–ù–û–í–ù–ê–Ø –°–ï–ö–¶–ò–Ø –†–ï–ö–õ–ê–ú–´ -->
    <section id="ad" class="section ad-section">
      <div class="section-header">
        <h2>–†–µ–∫–ª–∞–º–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</h2>
        <p class="ad-description">
          –†–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Å–≤–æ—é —Ä–µ–∫–ª–∞–º—É –Ω–∞ –Ω–∞—à–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –∏ –¥–æ—Å—Ç–∏–≥–Ω–∏—Ç–µ —à–∏—Ä–æ–∫–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏. 
          –ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–∫–ª–∞–º–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞.
        </p>
      </div>

      <!-- –†–µ–∫–ª–∞–º–Ω—ã–µ –±–∞–Ω–Ω–µ—Ä—ã -->
      <div class="ad-content">
        <% if (banners && banners.length > 0) { %>
          <div class="banners-section">
            <h3>üì¢ –ê–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–∫–ª–∞–º–Ω—ã–µ –±–∞–Ω–Ω–µ—Ä—ã</h3>
            <div class="banners-container">
              <% banners.forEach(banner => { %>
                <div class="banner-item">
                  <div class="banner-wrapper">
                    <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø–æ —Å—Å—ã–ª–∫–µ -->
                    <% if (banner.link) { %>
                      <a href="<%= banner.link %>" target="_blank" rel="noopener" class="banner-link-icon" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ">
                        <span>‚Üó</span>
                      </a>
                    <% } %>
                    <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–Ω–Ω–µ—Ä–∞ - –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ overlay -->
                    <img 
                      src="<%= banner.image_url %>" 
                      alt="–†–µ–∫–ª–∞–º–Ω—ã–π –±–∞–Ω–Ω–µ—Ä" 
                      class="banner-clickable"
                      data-banner-image="<%= banner.image_url %>"
                      style="width: 100%; height: auto; display: block; object-fit: cover; cursor: pointer; border-radius: 8px;"
                    >
                  </div>
                  <% if (banner.description) { %>
                    <div class="banner-description">
                      <p><%= banner.description %></p>
                    </div>
                  <% } %>
                </div>
              <% }) %>
            </div>
          </div>
        <% } else { %>
          <div class="no-banners">
            <div class="no-banners-content">
              <span class="no-banners-icon">üì¢</span>
              <h3>–ü–æ–∫–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –±–∞–Ω–Ω–µ—Ä–æ–≤</h3>
              <p>–ú–µ—Å—Ç–æ –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π, –±–∞–Ω–Ω–µ—Ä–æ–≤ –∏ –ø—Ä–æ–º–æ.</p>
            </div>
          </div>
        <% } %>
      </div>
    </section>
  </main>

  <!-- Footer —Å –≤–∫–ª–∞–¥–∫–∞–º–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
  <footer class="mobile-tabs-footer">
    <div class="mobile-tabs-container">
      <a href="/products" class="mobile-tab-button <%= '' %>">
        –¢–æ–≤–∞—Ä—ã
      </a>
      <a href="/services" class="mobile-tab-button <%= '' %>">
        –£—Å–ª—É–≥–∏
      </a>
      <a href="/ad" class="mobile-tab-button active">
        –†–µ–∫–ª–∞–º–∞
      </a>
      <a href="/about" class="mobile-tab-button <%= '' %>">
        –û –ù–∞—Å
      </a>
      <a href="/contacts" class="mobile-tab-button <%= '' %>">
        –ö–æ–Ω—Ç–∞–∫—Ç—ã
      </a>
      <a href="/videos" class="mobile-tab-button <%= '' %>">
        –í–∏–¥–µ–æ
      </a>
    </div>
  </footer>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
<div id="registerModal" class="modal" aria-hidden="true" style="display:none;">
  <div class="modal-content" role="dialog" aria-modal="true" aria-label="–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è">
    <button class="close" data-close-register aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
    <h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
    <form id="registerForm">
      <input type="text" name="username" placeholder="–ù–∏–∫–Ω–µ–π–º" required>
      <input type="email" name="email" placeholder="Email" required>
      <input type="password" name="password" placeholder="–ü–∞—Ä–æ–ª—å" minlength="6" required>
      <button type="submit">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
    </form>
    <div id="registerError" class="error" style="color:#b00020;margin-top:10px;display:none;"></div>
    <div id="registerSuccess" style="color:green;margin-top:10px;display:none;"></div>
  </div>
</div>

<!-- Bootstrap script for safe EJS ‚Üí JS data transfer -->
<script src="/utils/bootstrap.js"></script>
<script>
  // Safe initialization of global variables
  window.AppBootstrap.init(<%- JSON.stringify({
    isAuth: typeof isAuth !== 'undefined' ? isAuth : false,
    isAdmin: typeof isAdmin !== 'undefined' ? isAdmin : false,
    socketIoAvailable: typeof socket_io_available !== 'undefined' ? socket_io_available : false,
    userRole: typeof userRole !== 'undefined' ? userRole : null
  }) %>);
</script>

<script src="/script.js"></script>

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Ñ—É—Ç–µ—Ä–æ–º -->
<script src="/fix-footer-overlap.js"></script>

<style>
/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–∫–ª–∞–º—ã */
.ad-section {
  background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
}

.ad-description {
  text-align: center;
  color: #ccc;
  font-size: 1.1rem;
  margin-bottom: 30px;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
}

.ad-content {
  margin-bottom: 40px;
}

.banners-section h3 {
  color: #ff9999;
  margin-bottom: 20px;
  font-size: 1.3rem;
  text-align: center;
}

.banners-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

.banner-item {
  background: rgba(255, 51, 51, 0.05);
  border: 1px solid rgba(255, 51, 51, 0.2);
  border-radius: 12px;
  padding: 15px;
  position: relative;
  transition: all 0.3s ease;
}

.banner-item:hover {
  background: rgba(255, 51, 51, 0.1);
  transform: translateY(-2px);
}

.banner-wrapper {
  position: relative;
  border-radius: 8px;
  overflow: hidden;
}

.banner-link-icon {
  position: absolute;
  top: 10px;
  right: 10px;
  background: rgba(255, 51, 51, 0.8);
  color: white;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  z-index: 2;
  transition: all 0.3s ease;
}

.banner-link-icon:hover {
  background: #ff3333;
  transform: scale(1.1);
}

.banner-description {
  margin-top: 10px;
  padding: 10px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 6px;
}

.banner-description p {
  color: #ddd;
  margin: 0;
  font-size: 0.9rem;
}

.no-banners {
  text-align: center;
  padding: 60px 20px;
}

.no-banners-content {
  max-width: 400px;
  margin: 0 auto;
}

.no-banners-icon {
  font-size: 4rem;
  display: block;
  margin-bottom: 20px;
}

.no-banners h3 {
  color: #ff9999;
  margin-bottom: 15px;
  font-size: 1.3rem;
}

.no-banners p {
  color: #999;
  font-size: 1rem;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
  .ad-description {
    font-size: 1rem;
    margin-bottom: 25px;
  }
  
  .banners-container {
    grid-template-columns: 1fr;
    gap: 15px;
  }
}
</style>
</body>
</html>
