<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>EXTO ‚Äî –ö–∞—Ç–∞–ª–æ–≥</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <header class="main-header">
    <div class="container header-inner">
      <div class="header-left">
        <a class="logo" href="/">EXTO</a>
        <div class="header-stats">
          <div class="stat-item">
            <span style="opacity: 0.8;">üë• –ì–æ—Å—Ç–∏:</span>
            <strong style="color: #4caf50;"><%= typeof visitorCount !== 'undefined' ? visitorCount : 0 %></strong>
          </div>
          <div class="stat-item">
            <span style="opacity: 0.8;">üë§ –ü–∞—Ä—Ç–Ω–µ—Ä—ã:</span>
            <strong style="color: #2196f3;"><%= typeof userCount !== 'undefined' ? userCount : 0 %></strong>
          </div>
        </div>
      </div>
      <div class="header-actions">
        <% if (isAuth) { %>
          <% if (isAdmin) { %>
            <a class="btn outline" href="/admin">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
          <% } else { %>
            <a class="btn outline" href="/cabinet">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
          <% } %>
        <% } else { %>
          <a class="btn outline" href="/user/login">–í—Ö–æ–¥</a>
          <button id="openRegister" type="button" class="btn outline">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        <% } %>
      </div>
    </div>
  </header>

  <main>
    <section id="catalog" class="section">
      <div class="section-header">
        <h2>–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</h2>
        <% if (categories) { %>
          <div class="category-dropdown">
            <button id="openCategories" type="button" class="btn small outline">
              –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ <span style="opacity:.8">(<%= selectedCategory === 'all' ? '–≤—Å–µ' : categories[selectedCategory] %>)</span>
            </button>
            <div id="categoriesMenu" class="dropdown-menu" aria-hidden="true">
              <button class="dropdown-item" data-category="all">–í—Å–µ</button>
              <% Object.keys(categories).forEach(key => { %>
                <button class="dropdown-item" data-category="<%= key %>"><%= categories[key] %></button>
              <% }) %>
            </div>
          </div>
        <% } %>
      </div>

      <div id="product-grid" class="product-grid">
        <% if (products && products.length) { %>
          <% products.forEach(p => { %>
            <!-- FIX: –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –±–ª–æ–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è -->
            <div class="product-card-wrapper">
              <div class="product-card" data-product-id="<%= p._id %>">
                <!-- –ó–Ω–∞—á–æ–∫ i –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –æ–ø–∏—Å–∞–Ω–∏—è -->
                <% if (p.description) { %>
                  <div class="product-info-icon" 
                       data-description-modal="<%= p._id %>" 
                       data-description="<%= p.description.replace(/"/g, '&quot;').replace(/'/g, '&#39;') %>" 
                       data-product-name="<%= p.name.replace(/"/g, '&quot;').replace(/'/g, '&#39;') %>" 
                       aria-label="–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞">
                    <span>i</span>
                  </div>
                <% } %>
                <h3 class="product-title"><%= p.name %></h3>

                <!-- FIX: –°–ª–∞–π–¥–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–¥–æ 5 –∫–∞—Ä—Ç–∏–Ω–æ–∫) -->
                <div class="product-images-slider" data-product-id="<%= p._id %>">
                  <% 
                    // FIX: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—Å–∏–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–ª–∏ –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
                    let images = [];
                    if (p.images && Array.isArray(p.images) && p.images.length > 0) {
                      images = p.images;
                    } else if (p.image_url) {
                      images = [p.image_url];
                    }
                  %>
                  <% if (images.length > 0) { %>
                    <div class="product-images-container">
                      <% images.forEach((img, idx) => { %>
                        <img 
                          src="<%= img %>" 
                          alt="<%= p.name %> - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ <%= idx + 1 %>"
                          class="product-image-slide <%= idx === 0 ? 'active' : '' %> image-clickable"
                          data-image-index="<%= idx %>"
                          data-image-src="<%= img %>"
                          data-product-images='<%= JSON.stringify(images) %>'
                          data-product-name="<%= p.name %>"
                          loading="<%= idx === 0 ? 'eager' : 'lazy' %>"
                          style="cursor: pointer;"
                        >
                      <% }) %>
                      <% if (images.length > 1) { %>
                        <!-- FIX: –°—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å–ª–∞–π–¥–µ—Ä–∞ -->
                        <button class="slider-arrow slider-arrow-prev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Äπ</button>
                        <button class="slider-arrow slider-arrow-next" aria-label="–°–ª–µ–¥—É—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Ä∫</button>
                        <!-- FIX: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–ª–∞–π–¥–µ—Ä–∞ -->
                        <div class="slider-indicators">
                          <% images.forEach((img, idx) => { %>
                            <span class="slider-indicator <%= idx === 0 ? 'active' : '' %>" data-slide-index="<%= idx %>"></span>
                          <% }) %>
                        </div>
                      <% } %>
                    </div>
                  <% } else { %>
                    <div class="no-image">–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
                  <% } %>
                </div>

                <!-- FIX: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø—Ä–æ–¥–∞–≤—Ü–∞ —Å—Ä–∞–∑—É –Ω–∏–∂–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ -->
                <% 
                  const contacts = p.contacts || {};
                  const hasContacts = (contacts.phone || contacts.email || contacts.telegram || contacts.whatsapp || contacts.contact_method);
                %>
                <% if (hasContacts) { %>
                  <div class="product-contacts">
                    <h4 class="contacts-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã:</h4>
                    <div class="contacts-list">
                      <% if (contacts.phone) { %>
                        <a href="tel:<%= contacts.phone %>" class="contact-item">
                          <span class="contact-icon">üìû</span>
                          <span><%= contacts.phone %></span>
                        </a>
                      <% } %>
                      <% if (contacts.email) { %>
                        <a href="mailto:<%= contacts.email %>" class="contact-item">
                          <span class="contact-icon">‚úâÔ∏è</span>
                          <span><%= contacts.email %></span>
                        </a>
                      <% } %>
                      <% if (contacts.telegram) { %>
                        <a href="https://t.me/<%= contacts.telegram.replace('@', '') %>" target="_blank" rel="noopener" class="contact-item">
                          <span class="contact-icon">‚úàÔ∏è</span>
                          <span><%= contacts.telegram %></span>
                        </a>
                      <% } %>
                      <% if (contacts.whatsapp) { %>
                        <a href="https://wa.me/<%= contacts.whatsapp.replace(/[^0-9]/g, '') %>" target="_blank" rel="noopener" class="contact-item">
                          <span class="contact-icon">üí¨</span>
                          <span><%= contacts.whatsapp %></span>
                        </a>
                      <% } %>
                    </div>
                    <!-- FIX: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–æ—Å–æ–±–∞ —Å–≤—è–∑–∏ -->
                    <% if (contacts.contact_method) { %>
                      <div class="contact-method">
                        <span class="contact-method-label">–°–ø–æ—Å–æ–± —Å–≤—è–∑–∏:</span>
                        <span class="contact-method-text"><%= contacts.contact_method %></span>
                      </div>
                    <% } %>
                  </div>
                <% } %>

                <div class="product-bottom">

                  <span class="price"><%= p.price %> ‚Ç∏</span>

                  <div class="product-actions">
                    <a class="btn small outline" href="<%= p.link %>" target="_blank" rel="noopener">–ü–µ—Ä–µ–π—Ç–∏</a>
                    <% if (p.video_url) { %>
                      <!-- –ö–Ω–æ–ø–∫–∞ "–û–±–∑–æ—Ä" –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤–∫–ª—é—á–∞—è –≥–æ—Å—Ç–µ–π -->
                      <button class="btn small" data-video="<%= p.video_url %>">–û–±–∑–æ—Ä</button>
                    <% } %>
                  </div>

                  <!-- üîπ –ë–ª–æ–∫ —Ä–µ–π—Ç–∏–Ω–≥–∞ -->
                  <div class="product-rating" data-id="<%= p._id %>" data-voted="false">
                    <button class="like-btn btn icon" type="button" aria-label="–õ–∞–π–∫">‚ñ≤</button>

                    <span class="result">
                      <% const likes = p.likes || 0; %>
                      <% const dislikes = p.dislikes || 0; %>
                      <%= likes - dislikes %>
                    </span>

                    <button class="dislike-btn btn icon" type="button" aria-label="–î–∏–∑–ª–∞–π–∫">‚ñº</button>

                    <span class="votes">
                      (<%= (p.likes || 0) + (p.dislikes || 0) %> –≥–æ–ª–æ—Å–æ–≤)
                    </span>
                  </div>
                </div>
              </div>

              <!-- FIX: –ë–ª–æ–∫ –æ–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –ø–æ–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π (—à–∏—Ä–µ –∫–∞—Ä—Ç–æ—á–∫–∏) -->
              <% if (p.description) { %>
                <div class="product-description-block" data-product-id="<%= p._id %>" style="display: none;">
                  <div class="product-description-content">
                    <h4 class="product-description-title">–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</h4>
                    <p class="product-description-text"><%= p.description %></p>
                  </div>
                </div>
              <% } %>
            </div>
          <% }) %>
        <% } else { %>
          <p class="empty-state">–ü–æ–∫–∞ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤</p>
        <% } %>
      </div>
    </section>

    <!-- –ö–∞—Ç–∞–ª–æ–≥ —É—Å–ª—É–≥ -->
    <section id="services" class="section">
      <div class="section-header">
        <h2>–ö–∞—Ç–∞–ª–æ–≥ —É—Å–ª—É–≥</h2>
        <% if (categories) { %>
          <div class="category-dropdown">
            <button id="openServicesCategories" type="button" class="btn small outline">
              –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ <span style="opacity:.8">(<%= selectedCategory === 'all' ? '–≤—Å–µ' : categories[selectedCategory] %>)</span>
            </button>
            <div id="servicesCategoriesMenu" class="dropdown-menu" aria-hidden="true">
              <button class="dropdown-item" data-category="all">–í—Å–µ</button>
              <% Object.keys(categories).forEach(key => { %>
                <button class="dropdown-item" data-category="<%= key %>"><%= categories[key] %></button>
              <% }) %>
            </div>
          </div>
        <% } %>
      </div>

      <div id="services-grid" class="product-grid">
        <% if (services && services.length) { %>
          <% services.forEach(s => { %>
            <!-- FIX: –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –±–ª–æ–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è -->
            <div class="product-card-wrapper">
              <div class="product-card" data-product-id="<%= s._id %>">
                <!-- –ó–Ω–∞—á–æ–∫ i –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –æ–ø–∏—Å–∞–Ω–∏—è -->
                <% if (s.description) { %>
                  <div class="product-info-icon" 
                       data-description-modal="<%= s._id %>" 
                       data-description="<%= s.description.replace(/"/g, '&quot;').replace(/'/g, '&#39;') %>" 
                       data-product-name="<%= s.name.replace(/"/g, '&quot;').replace(/'/g, '&#39;') %>" 
                       aria-label="–û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏">
                    <span>i</span>
                  </div>
                <% } %>
                <h3 class="product-title"><%= s.name %></h3>

                <!-- FIX: –°–ª–∞–π–¥–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–¥–æ 5 –∫–∞—Ä—Ç–∏–Ω–æ–∫) -->
                <div class="product-images-slider" data-product-id="<%= s._id %>">
                  <% 
                    // FIX: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—Å–∏–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–ª–∏ –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
                    let images = [];
                    if (s.images && Array.isArray(s.images) && s.images.length > 0) {
                      images = s.images;
                    } else if (s.image_url) {
                      images = [s.image_url];
                    }
                  %>
                  <% if (images.length > 0) { %>
                    <div class="product-images-container">
                      <% images.forEach((img, idx) => { %>
                        <img 
                          src="<%= img %>" 
                          alt="<%= s.name %> - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ <%= idx + 1 %>"
                          class="product-image-slide <%= idx === 0 ? 'active' : '' %> image-clickable"
                          data-image-index="<%= idx %>"
                          data-image-src="<%= img %>"
                          data-product-images='<%= JSON.stringify(images) %>'
                          data-product-name="<%= s.name %>"
                          loading="<%= idx === 0 ? 'eager' : 'lazy' %>"
                          style="cursor: pointer;"
                        >
                      <% }) %>
                      <% if (images.length > 1) { %>
                        <!-- FIX: –°—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å–ª–∞–π–¥–µ—Ä–∞ -->
                        <button class="slider-arrow slider-arrow-prev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Äπ</button>
                        <button class="slider-arrow slider-arrow-next" aria-label="–°–ª–µ–¥—É—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Ä∫</button>
                        <!-- FIX: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–ª–∞–π–¥–µ—Ä–∞ -->
                        <div class="slider-indicators">
                          <% images.forEach((img, idx) => { %>
                            <span class="slider-indicator <%= idx === 0 ? 'active' : '' %>" data-slide-index="<%= idx %>"></span>
                          <% }) %>
                        </div>
                      <% } %>
                    </div>
                  <% } else { %>
                    <div class="no-image">–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
                  <% } %>
                </div>

                <!-- FIX: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø—Ä–æ–¥–∞–≤—Ü–∞ —Å—Ä–∞–∑—É –Ω–∏–∂–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ -->
                <% 
                  const contacts = s.contacts || {};
                  const hasContacts = (contacts.phone || contacts.email || contacts.telegram || contacts.whatsapp || contacts.contact_method);
                %>
                <% if (hasContacts) { %>
                  <div class="product-contacts">
                    <h4 class="contacts-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã:</h4>
                    <div class="contacts-list">
                      <% if (contacts.phone) { %>
                        <a href="tel:<%= contacts.phone %>" class="contact-item">
                          <span class="contact-icon">üìû</span>
                          <span><%= contacts.phone %></span>
                        </a>
                      <% } %>
                      <% if (contacts.email) { %>
                        <a href="mailto:<%= contacts.email %>" class="contact-item">
                          <span class="contact-icon">‚úâÔ∏è</span>
                          <span><%= contacts.email %></span>
                        </a>
                      <% } %>
                      <% if (contacts.telegram) { %>
                        <a href="https://t.me/<%= contacts.telegram.replace('@', '') %>" target="_blank" rel="noopener" class="contact-item">
                          <span class="contact-icon">‚úàÔ∏è</span>
                          <span><%= contacts.telegram %></span>
                        </a>
                      <% } %>
                      <% if (contacts.whatsapp) { %>
                        <a href="https://wa.me/<%= contacts.whatsapp.replace(/[^0-9]/g, '') %>" target="_blank" rel="noopener" class="contact-item">
                          <span class="contact-icon">üí¨</span>
                          <span><%= contacts.whatsapp %></span>
                        </a>
                      <% } %>
                    </div>
                    <!-- FIX: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–æ—Å–æ–±–∞ —Å–≤—è–∑–∏ -->
                    <% if (contacts.contact_method) { %>
                      <div class="contact-method">
                        <span class="contact-method-label">–°–ø–æ—Å–æ–± —Å–≤—è–∑–∏:</span>
                        <span class="contact-method-text"><%= contacts.contact_method %></span>
                      </div>
                    <% } %>
                  </div>
                <% } %>

                <div class="product-bottom">

                  <span class="price"><%= s.price %> ‚Ç∏</span>

                  <div class="product-actions">
                    <a class="btn small outline" href="<%= s.link %>" target="_blank" rel="noopener">–ü–µ—Ä–µ–π—Ç–∏</a>
                    <% if (s.video_url) { %>
                      <!-- –ö–Ω–æ–ø–∫–∞ "–û–±–∑–æ—Ä" –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤–∫–ª—é—á–∞—è –≥–æ—Å—Ç–µ–π -->
                      <button class="btn small" data-video="<%= s.video_url %>">–û–±–∑–æ—Ä</button>
                    <% } %>
                  </div>
                  </div>

                  <!-- üîπ –ë–ª–æ–∫ —Ä–µ–π—Ç–∏–Ω–≥–∞ -->
                  <div class="product-rating" data-id="<%= s._id %>" data-voted="<%= (votedMap && votedMap[s._id.toString()]) ? 'true' : 'false' %>">
                    <button class="like-btn btn icon" type="button" aria-label="–õ–∞–π–∫">‚ñ≤</button>

                    <span class="result">
                      <% const likes = s.likes || 0; %>
                      <% const dislikes = s.dislikes || 0; %>
                      <%= likes - dislikes %>
                    </span>

                    <button class="dislike-btn btn icon" type="button" aria-label="–î–∏–∑–ª–∞–π–∫">‚ñº</button>

                    <span class="votes">
                      (<%= (s.likes || 0) + (s.dislikes || 0) %> –≥–æ–ª–æ—Å–æ–≤)
                    </span>
                  </div>
                </div>
              </div>
            </div>
          <% }) %>
        <% } else { %>
          <p class="empty-state">–ü–æ–∫–∞ –Ω–µ—Ç —É—Å–ª—É–≥</p>
        <% } %>
      </div>
    </section>

    <!-- –†–µ–∫–ª–∞–º–Ω—ã–π –±–ª–æ–∫ -->
    <section id="ad" class="section">
      <h2>–¢—É—Ç –≤–∞—à–∞ —Ä–µ–∫–ª–∞–º–∞</h2>
      <% if (banners && banners.length > 0) { %>
        <div class="banners-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
          <% banners.forEach(banner => { %>
            <div class="banner-item" style="position: relative; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø–æ —Å—Å—ã–ª–∫–µ (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –∫–Ω–æ–ø–∫–µ –æ–ø–∏—Å–∞–Ω–∏—è) -->
              <% if (banner.link) { %>
                <a href="<%= banner.link %>" target="_blank" rel="noopener" class="banner-link-icon" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ">
                  <span>w</span>
                </a>
              <% } %>
              <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–Ω–Ω–µ—Ä–∞ - –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ overlay -->
              <img 
                src="<%= banner.image_url %>" 
                alt="–†–µ–∫–ª–∞–º–Ω—ã–π –±–∞–Ω–Ω–µ—Ä" 
                class="banner-clickable"
                data-banner-image="<%= banner.image_url %>"
                style="width: 100%; height: auto; display: block; object-fit: cover; cursor: pointer;">
            </div>
          <% }) %>
        </div>
      <% } else { %>
        <p class="disclaimer" style="text-align:center;margin-top:10px;">
          –ú–µ—Å—Ç–æ –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π, –±–∞–Ω–Ω–µ—Ä–æ–≤ –∏ –ø—Ä–æ–º–æ.
        </p>
      <% } %>
    </section>

    <section id="about" class="section">
      <h2>–û –ø—Ä–æ–µ–∫—Ç–µ</h2>
      <p class="disclaimer">
        EXTO ‚Äî —ç—Ç–æ –∫–∞—Ç–∞–ª–æ–≥ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π. –ú—ã —Å—Ç—Ä–µ–º–∏–º—Å—è –∫ –ø—Ä–∏–≤—ã—á–Ω–æ–º—É UX, —á–∏—Å—Ç–æ–π –≤–∏–∑—É–∞–ª—å–Ω–æ–π –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å—Ç–∫–µ.
      </p>
    </section>

    <section id="contacts" class="section">
      <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
      <p class="disclaimer">
        –ü–æ –≤–æ–ø—Ä–æ—Å–∞–º —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π ‚Äî –ø–∏—à–∏—Ç–µ –Ω–∞–º.
      </p>
    </section>
  </main>

 <footer class="footer">
  <p>¬© 2025 EXTO Ecosystem</p>
</footer>

<!-- FIX: –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π overlay –¥–ª—è YouTube –≤–∏–¥–µ–æ -->
<div id="videoOverlay" class="video-overlay" aria-hidden="true" style="display:none;">
  <div class="video-overlay-container">
    <button class="video-overlay-close" data-close-video aria-label="–ó–∞–∫—Ä—ã—Ç—å –≤–∏–¥–µ–æ">&times;</button>
    <div class="video-overlay-iframe-container" id="videoIframeContainer">
      <!-- FIX: iframe —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ –∫–ª–∏–∫—É, –ø—É—Å—Ç–æ–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ -->
    </div>
  </div>
</div>

<!-- FIX: Overlay –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ø–æ–ª–Ω–æ–º —Ä–∞–∑–º–µ—Ä–µ -->
<div id="imageOverlay" class="image-overlay" aria-hidden="true">
  <div class="image-overlay-container">
    <button class="image-overlay-close" data-close-image aria-label="–ó–∞–∫—Ä—ã—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">&times;</button>
    <img id="imageOverlayImg" src="" alt="" class="image-overlay-img">
    <button class="image-overlay-nav image-overlay-prev" data-image-nav="prev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Äπ</button>
    <button class="image-overlay-nav image-overlay-next" data-image-nav="next" aria-label="–°–ª–µ–¥—É—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Ä∫</button>
  </div>
</div>

<!-- FIX: –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ø–æ–ª–Ω–æ–º —Ä–∞–∑–º–µ—Ä–µ -->
<div id="imageModal" class="modal image-modal" aria-hidden="true" style="display:none;">
  <div class="modal-content image-modal-content" role="dialog" aria-modal="true" aria-label="–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
    <button class="close" data-close-image aria-label="–ó–∞–∫—Ä—ã—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">&times;</button>
    <div class="image-modal-container">
      <button class="image-nav-btn image-nav-prev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Äπ</button>
      <div class="image-modal-image-wrapper">
        <img id="imageModalImage" src="" alt="" class="image-modal-image">
        <div class="image-modal-counter">
          <span id="imageModalCurrent">1</span> / <span id="imageModalTotal">1</span>
        </div>
        <div class="image-modal-title" id="imageModalTitle"></div>
      </div>
      <button class="image-nav-btn image-nav-next" aria-label="–°–ª–µ–¥—É—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Ä∫</button>
    </div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ -->
<div id="descriptionModal" class="modal description-modal" aria-hidden="true" style="display:none;">
  <div class="modal-content description-modal-content" role="dialog" aria-modal="true" aria-label="–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞">
    <button class="close" data-close-description aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
    <h3 id="descriptionModalTitle" style="margin-bottom:20px;font-size:1.5rem;color:#fff;">–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</h3>
    <div id="descriptionModalContent" style="max-height:75vh;overflow-y:auto;padding:20px 0;line-height:1.6;font-size:1.1rem;color:#ddd;">
      <!-- –û–ø–∏—Å–∞–Ω–∏–µ –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>
  </div>
</div>

<!-- –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
<div id="registerModal" class="modal" aria-hidden="true" style="display:none;">
  <div class="modal-content" role="dialog" aria-modal="true" aria-label="–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è">
    <button class="close" data-close-register aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
    <h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
    <form id="registerForm">
      <input type="text" name="username" placeholder="–ù–∏–∫–Ω–µ–π–º" required>
      <input type="email" name="email" placeholder="Email" required>
      <input type="password" name="password" placeholder="–ü–∞—Ä–æ–ª—å" minlength="6" required>
      <input type="hidden" name="_csrf" id="registerCsrfToken" value="">
      <button type="submit">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
    </form>
    <div id="registerError" class="error" style="color:#b00020;margin-top:10px;display:none;"></div>
    <div id="registerSuccess" style="color:green;margin-top:10px;display:none;"></div>
  </div>
</div>

<script>window.IS_AUTH = <%= JSON.stringify(isAuth) %>;</script>

<!-- –ó–∞–≥—Ä—É–∂–∞–µ–º YouTube IFrame API –ø–µ—Ä–µ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º -->
<script>
  // –ó–∞–≥—Ä—É–∑–∫–∞ YouTube IFrame API
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
</script>

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç (–≤–∫–ª—é—á–∞–µ—Ç –≤–µ—Å—å JS: youtube init, –º–æ–¥–∞–ª–∫–∏, —Ä–µ–π—Ç–∏–Ω–≥, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è) -->
<script src="/script.js"></script>
</body>
</html>
