<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Albamount ‚Äî –ö–∞—Ç–∞–ª–æ–≥</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <meta name="csrf-token" content="<%= typeof csrfToken !== 'undefined' ? csrfToken : '' %>">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://www.youtube.com https://s.ytimg.com https://fonts.googleapis.com https://fonts.gstatic.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com; img-src 'self' data: https:; font-src 'self' https://fonts.gstatic.com; connect-src 'self' https://api.instagram.com https://graph.instagram.com wss://socket.io https://*.cloudinary.com; frame-src 'self' https://www.youtube.com https://vk.com https://instagram.com https://www.instagram.com; trusted-types youtube-widget-api;">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css?v=1.0.1">
  <link rel="stylesheet" href="/header-tabs.css?v=1.0.1">
</head>
<body>
  <!-- –û–¥–Ω–æ—ç—Ç–∞–∂–Ω—ã–π header –±–µ–∑ –≤–∫–ª–∞–¥–æ–∫ -->
  <header class="main-header">
    <div class="container header-inner">
      <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
      <div class="header-top">
        <div class="header-left">
          <a class="logo" href="/"><img src="/albamount.png" alt="ALBAMOUNT" class="logo-img"></a>
          <div class="header-stats">
            <div class="stat-item">
              <span style="opacity: 0.8;">üë•</span>
              <strong style="color: #4caf50;"><%= typeof visitorCount !== 'undefined' ? visitorCount : 0 %></strong>
            </div>
            <div class="stat-item">
              <span style="opacity: 0.8;">üë§</span>
              <strong style="color: #2196f3;"><%= typeof userCount !== 'undefined' ? userCount : 0 %></strong>
            </div>
          </div>
        </div>
        <div class="header-actions">
          <% if (isAuth) { %>
            <% if (isAdmin) { %>
              <a class="btn outline" href="/admin">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
            <% } else { %>
              <a class="btn outline" href="/cabinet">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
            <% } %>
          <% } else { %>
            <a class="btn outline" href="/user/login">–í—Ö–æ–¥</a>
            <button id="openRegister" type="button" class="btn outline">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
          <% } %>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section id="catalog" class="section">
      <div class="section-header">
        <h2>–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤</h2>
        <% if (categories) { %>
          <div class="category-dropdown">
            <button id="openCategories" type="button" class="btn small outline">
              –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ <span style="opacity:.8">(<%= selectedCategory === 'all' ? '–≤—Å–µ' : categories[selectedCategory] %>)</span>
            </button>
            <div id="categoriesMenu" class="dropdown-menu" aria-hidden="true">
              <button class="dropdown-item" data-category="all">–í—Å–µ</button>
              <% Object.keys(categories).forEach(key => { %>
                <button class="dropdown-item" data-category="<%= key %>"><%= categories[key] %></button>
              <% }) %>
            </div>
          </div>
        <% } %>
      </div>

      <div id="product-grid" class="product-grid">
        <% if (products && products.length) { %>
          <% products.forEach(p => { %>
            <!-- FIX: –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –±–ª–æ–∫–∞ –æ–ø–∏—Å–∞–Ω–∏—è -->
            <div class="product-card-wrapper">
              <div class="product-card" data-product-id="<%= p._id %>">
                <!-- –ó–Ω–∞—á–æ–∫ i –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –æ–ø–∏—Å–∞–Ω–∏—è -->
                <% if (p.description) { %>
                  <div class="product-info-icon" 
                       data-description-modal="<%= p._id %>" 
                       data-description="<%= p.description.replace(/"/g, '&quot;').replace(/'/g, '&#39;') %>" 
                       data-product-name="<%= p.name.replace(/"/g, '&quot;').replace(/'/g, '&#39;') %>" 
                       aria-label="–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞">
                    <span>i</span>
                  </div>
                <% } %>
                <h3 class="product-title"><%= p.name %></h3>

                <!-- FIX: –°–ª–∞–π–¥–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–¥–æ 5 –∫–∞—Ä—Ç–∏–Ω–æ–∫) -->
                <div class="product-images-slider" data-product-id="<%= p._id %>">
                  <% 
                    // FIX: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—Å–∏–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–ª–∏ –æ–¥–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
                    let images = [];
                    if (p.images && Array.isArray(p.images) && p.images.length > 0) {
                      images = p.images;
                    } else if (p.image_url) {
                      images = [p.image_url];
                    }
                  %>
                  <% if (images.length > 0) { %>
                    <div class="product-images-container">
                      <% images.forEach((img, idx) => { %>
                        <img 
                          src="<%= img %>" 
                          alt="<%= p.name %> - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ <%= idx + 1 %>"
                          class="product-image-slide <%= idx === 0 ? 'active' : '' %> image-clickable"
                          data-image-index="<%= idx %>"
                          data-image-src="<%= img %>"
                          data-product-images='<%= JSON.stringify(images) %>'
                          data-product-name="<%= p.name %>"
                          loading="<%= idx === 0 ? 'eager' : 'lazy' %>"
                          style="cursor: pointer;"
                        >
                      <% }) %>
                      <% if (images.length > 1) { %>
                        <!-- FIX: –°—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å–ª–∞–π–¥–µ—Ä–∞ -->
                        <button class="slider-arrow slider-arrow-prev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Äπ</button>
                        <button class="slider-arrow slider-arrow-next" aria-label="–°–ª–µ–¥—É—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Ä∫</button>
                        <!-- FIX: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–ª–∞–π–¥–µ—Ä–∞ -->
                        <div class="slider-indicators">
                          <% images.forEach((img, idx) => { %>
                            <span class="slider-indicator <%= idx === 0 ? 'active' : '' %>" data-slide-index="<%= idx %>"></span>
                          <% }) %>
                        </div>
                      <% } %>
                    </div>
                  <% } else { %>
                    <div class="no-image">–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
                  <% } %>
                </div>

                <!-- FIX: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø—Ä–æ–¥–∞–≤—Ü–∞ —Å—Ä–∞–∑—É –Ω–∏–∂–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ -->
                <% 
                  const contacts = p.contacts || {};
                  const hasContacts = (contacts.phone || contacts.email || contacts.telegram || contacts.whatsapp || contacts.contact_method);
                %>
                <% if (hasContacts) { %>
                  <div class="product-contacts">
                    <h4 class="contacts-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã:</h4>
                    <div class="contacts-list">
                      <% if (contacts.phone) { %>
                        <a href="tel:<%= contacts.phone %>" class="contact-item">
                          <span class="contact-icon">üìû</span>
                          <span><%= contacts.phone %></span>
                        </a>
                      <% } %>
                      <% if (contacts.email) { %>
                        <a href="mailto:<%= contacts.email %>" class="contact-item">
                          <span class="contact-icon">‚úâÔ∏è</span>
                          <span><%= contacts.email %></span>
                        </a>
                      <% } %>
                      <% if (contacts.telegram) { %>
                        <a href="https://t.me/<%= contacts.telegram.replace('@', '') %>" target="_blank" rel="noopener" class="contact-item">
                          <span class="contact-icon">‚úàÔ∏è</span>
                          <span><%= contacts.telegram %></span>
                        </a>
                      <% } %>
                      <% if (contacts.whatsapp) { %>
                        <a href="https://wa.me/<%= contacts.whatsapp.replace(/[^0-9]/g, '') %>" target="_blank" rel="noopener" class="contact-item">
                          <span class="contact-icon">üí¨</span>
                          <span><%= contacts.whatsapp %></span>
                        </a>
                      <% } %>
                    </div>
                    <!-- FIX: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–æ—Å–æ–±–∞ —Å–≤—è–∑–∏ -->
                    <% if (contacts.contact_method) { %>
                      <div class="contact-method">
                        <span class="contact-method-label">–°–ø–æ—Å–æ–± —Å–≤—è–∑–∏:</span>
                        <span class="contact-method-text"><%= contacts.contact_method %></span>
                      </div>
                    <% } %>
                  </div>
                <% } %>

                <div class="product-bottom">

                  <span class="price"><%= p.price %> ‚Ç∏</span>

                  <div class="product-actions">
                    <a class="btn small outline" href="<%= p.link %>" target="_blank" rel="noopener">–ü–µ—Ä–µ–π—Ç–∏</a>
                    <% if (p.video_url) { %>
                      <!-- –ö–Ω–æ–ø–∫–∞ "–û–±–∑–æ—Ä" –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤–∫–ª—é—á–∞—è –≥–æ—Å—Ç–µ–π -->
                      <button class="btn small video-btn" data-video="<%= p.video_url %>">–û–±–∑–æ—Ä</button>
                    <% } %>
                    <button class="chat-btn btn small outline" data-card-id="<%= p._id %>" type="button">üí¨ –ß–∞—Ç</button>
                  </div>

                  <!-- üîπ –ë–ª–æ–∫ —Ä–µ–π—Ç–∏–Ω–≥–∞ -->
                  <div class="product-rating" data-id="<%= p._id %>" data-voted="false">
                    <button class="like-btn btn icon" type="button" aria-label="–õ–∞–π–∫">‚ñ≤</button>

                    <span class="result">
                      <% const likes = p.likes || 0; %>
                      <% const dislikes = p.dislikes || 0; %>
                      <%= likes - dislikes %>
                    </span>

                    <button class="dislike-btn btn icon" type="button" aria-label="–î–∏–∑–ª–∞–π–∫">‚ñº</button>

                    <span class="votes">
                      (<%= (p.likes || 0) + (p.dislikes || 0) %> –≥–æ–ª–æ—Å–æ–≤)
                    </span>
                  </div>
                </div>
              </div>

              <!-- FIX: –ë–ª–æ–∫ –æ–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –ø–æ–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π (—à–∏—Ä–µ –∫–∞—Ä—Ç–æ—á–∫–∏) -->
              <% if (p.description) { %>
                <div class="product-description-block" data-product-id="<%= p._id %>" style="display: none;">
                  <div class="product-description-content">
                    <h4 class="product-description-title">–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</h4>
                    <p class="product-description-text"><%= p.description %></p>
                  </div>
                </div>
              <% } %>
            </div>
          <% }) %>
        <% } else { %>
          <p class="empty-state">–ü–æ–∫–∞ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤</p>
        <% } %>
      </div>
    </section>

    <!-- –°–µ–∫—Ü–∏—è —É—Å–ª—É–≥ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É /services -->
    
    <!-- –°–µ–∫—Ü–∏—è —Ä–µ–∫–ª–∞–º—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É /ad -->

    <!-- –°–µ–∫—Ü–∏–∏ "–û –ø—Ä–æ–µ–∫—Ç–µ" –∏ "–ö–æ–Ω—Ç–∞–∫—Ç—ã" –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <!-- /about - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ "–û –Ω–∞—Å" -->
    <!-- /contacts - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ -->

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ —á–∞—Ç–∞ –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ -->
    <% if (products && products.length) { %>
      <% products.forEach(p => { %>
        <div class="chat-modal" id="chat-modal-<%= p._id %>" style="display: none;">
          <div class="chat-modal-overlay" data-close-chat-modal="<%= p._id %>"></div>
          <div class="chat-modal-content">
            <div class="chat-modal-header">
              <h3>–ß–∞—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</h3>
              <button class="chat-close-btn" data-close-chat-modal="<%= p._id %>" type="button">√ó</button>
            </div>
            <div class="chat-messages" id="chat-messages-<%= p._id %>">
              <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            <div class="chat-input-container">
              <textarea
                class="chat-input"
                id="chat-input-<%= p._id %>"
                placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                maxlength="1000"
                rows="2"
              ></textarea>
              <button class="chat-send-btn" data-send-chat-message="<%= p._id %>" type="button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
          </div>
        </div>
      <% }) %>
    <% } %>

    <% if (services && services.length) { %>
      <% services.forEach(s => { %>
        <div class="chat-modal" id="chat-modal-<%= s._id %>" style="display: none;">
          <div class="chat-modal-overlay" data-close-chat-modal="<%= s._id %>"></div>
          <div class="chat-modal-content">
            <div class="chat-modal-header">
              <h3>–ß–∞—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</h3>
              <button class="chat-close-btn" data-close-chat-modal="<%= s._id %>" type="button">√ó</button>
            </div>
            <div class="chat-messages" id="chat-messages-<%= s._id %>">
              <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            <div class="chat-input-container">
              <textarea
                class="chat-input"
                id="chat-input-<%= s._id %>"
                placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                maxlength="1000"
                rows="2"
              ></textarea>
              <button class="chat-send-btn" data-send-chat-message="<%= s._id %>" type="button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
          </div>
        </div>
      <% }) %>
    <% } %>
  </main>


  <!-- Footer —Å –≤–∫–ª–∞–¥–∫–∞–º–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
  <footer class="mobile-tabs-footer">
    <div class="mobile-tabs-container">
      <a href="/products" class="mobile-tab-button <%= typeof activeTab !== 'undefined' && activeTab === 'products' ? 'active' : '' %>">
        –¢–æ–≤–∞—Ä—ã
      </a>
      <a href="/services" class="mobile-tab-button <%= typeof activeTab !== 'undefined' && activeTab === 'services' ? 'active' : '' %>">
        –£—Å–ª—É–≥–∏
      </a>
      <a href="/ad" class="mobile-tab-button <%= typeof activeTab !== 'undefined' && activeTab === 'ad' ? 'active' : '' %>">
        –†–µ–∫–ª–∞–º–∞
      </a>
      <a href="/about" class="mobile-tab-button <%= typeof activeTab !== 'undefined' && activeTab === 'about' ? 'active' : '' %>">
        –û –ù–∞—Å
      </a>
      <a href="/contacts" class="mobile-tab-button <%= typeof activeTab !== 'undefined' && activeTab === 'contacts' ? 'active' : '' %>">
        –ö–æ–Ω—Ç–∞–∫—Ç—ã
      </a>
    </div>
  </footer>

<!-- FIX: –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π overlay –¥–ª—è YouTube –≤–∏–¥–µ–æ -->
<div id="videoOverlay" class="video-overlay" aria-hidden="true" style="display:none;">
  <div class="video-overlay-container">
    <button class="video-overlay-close" data-close-video aria-label="–ó–∞–∫—Ä—ã—Ç—å –≤–∏–¥–µ–æ">&times;</button>
    <div class="video-overlay-iframe-container" id="videoIframeContainer">
      <!-- FIX: iframe —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ –∫–ª–∏–∫—É, –ø—É—Å—Ç–æ–π –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ -->
    </div>
  </div>
</div>

<!-- FIX: Overlay –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ø–æ–ª–Ω–æ–º —Ä–∞–∑–º–µ—Ä–µ -->
<div id="imageOverlay" class="image-overlay" aria-hidden="true">
  <div class="image-overlay-container">
    <button class="image-overlay-close" data-close-image aria-label="–ó–∞–∫—Ä—ã—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">&times;</button>
    <img id="imageOverlayImg" src="" alt="" class="image-overlay-img">
    <button class="image-overlay-nav image-overlay-prev" data-image-nav="prev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Äπ</button>
    <button class="image-overlay-nav image-overlay-next" data-image-nav="next" aria-label="–°–ª–µ–¥—É—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Ä∫</button>
  </div>
</div>

<!-- FIX: –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ø–æ–ª–Ω–æ–º —Ä–∞–∑–º–µ—Ä–µ -->
<div id="imageModal" class="modal image-modal" aria-hidden="true" style="display:none;">
  <div class="modal-content image-modal-content" role="dialog" aria-modal="true" aria-label="–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è">
    <button class="close" data-close-image aria-label="–ó–∞–∫—Ä—ã—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">&times;</button>
    <div class="image-modal-container">
      <button class="image-nav-btn image-nav-prev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Äπ</button>
      <div class="image-modal-image-wrapper">
        <img id="imageModalImage" src="" alt="" class="image-modal-image">
        <div class="image-modal-counter">
          <span id="imageModalCurrent">1</span> / <span id="imageModalTotal">1</span>
        </div>
        <div class="image-modal-title" id="imageModalTitle"></div>
      </div>
      <button class="image-nav-btn image-nav-next" aria-label="–°–ª–µ–¥—É—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">‚Ä∫</button>
    </div>
  </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ -->
<div id="descriptionModal" class="modal description-modal" aria-hidden="true" style="display:none;">
  <div class="modal-content description-modal-content" role="dialog" aria-modal="true" aria-label="–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞">
    <button class="close" data-close-description aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
    <h3 id="descriptionModalTitle" style="margin-bottom:20px;font-size:1.5rem;color:#fff;">–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</h3>
    <div id="descriptionModalContent" style="max-height:75vh;overflow-y:auto;padding:20px 0;line-height:1.6;font-size:1.1rem;color:#ddd;">
      <!-- –û–ø–∏—Å–∞–Ω–∏–µ –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>
  </div>
</div>

<!-- –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
<div id="registerModal" class="modal" aria-hidden="true" style="display:none;">
  <div class="modal-content" role="dialog" aria-modal="true" aria-label="–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è">
    <button class="close" data-close-register aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
    <h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
    <form id="registerForm">
      <input type="text" name="username" placeholder="–ù–∏–∫–Ω–µ–π–º" required>
      <input type="email" name="email" placeholder="Email" required>
      <input type="password" name="password" placeholder="–ü–∞—Ä–æ–ª—å" minlength="6" required>
      <button type="submit">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
    </form>
    <div id="registerError" class="error" style="color:#b00020;margin-top:10px;display:none;"></div>
    <div id="registerSuccess" style="color:green;margin-top:10px;display:none;"></div>
  </div>
</div>

<!-- –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≥–æ—Å—Ç–µ–π —á–∞—Ç–∞ -->
<div id="authModal" class="modal" aria-hidden="true" style="display:none;">
  <div class="modal-content" role="dialog" aria-modal="true" aria-label="–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–ª—è —á–∞—Ç–∞">
    <button class="close" data-close-auth aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
    <h3>–ß—Ç–æ–±—ã –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —á–∞—Ç–æ–º, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É</h3>
    <div style="display:flex;gap:10px;margin-top:20px;">
      <a href="/user/login" class="btn">–í–æ–π—Ç–∏</a>
      <a href="/user/register" class="btn outline">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
    </div>
  </div>
</div>

<% let isAuthValue = typeof isAuth !== 'undefined' ? isAuth : false; %>
<% if (isAuthValue) { %>
<script>window.IS_AUTH = true;</script>
<% } else { %>
<script>window.IS_AUTH = false;</script>
<% } %>

<% let isAdminValue = typeof isAdmin !== 'undefined' ? isAdmin : false; %>
<% if (isAdminValue) { %>
<script>window.IS_ADMIN = true;</script>
<% } else { %>
<script>window.IS_ADMIN = false;</script>
<% } %>

<% let userRoleValue = typeof userRole !== 'undefined' ? userRole : null; %>
<script>window.USER_ROLE = '<%= userRoleValue %>';</script>

<!-- –ó–∞–≥—Ä—É–∂–∞–µ–º YouTube IFrame API –ø–µ—Ä–µ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º -->
<script>
  // –ó–∞–≥—Ä—É–∑–∫–∞ YouTube IFrame API
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
</script>

<!-- Socket.IO -->
<script src="/socket.io/socket.io.js"></script>

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç (–≤–∫–ª—é—á–∞–µ—Ç –≤–µ—Å—å JS: youtube init, –º–æ–¥–∞–ª–∫–∏, —Ä–µ–π—Ç–∏–Ω–≥, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è) -->
<script src="/script.js?v=1.0.1"></script>

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Ñ—É—Ç–µ—Ä–æ–º -->
<script src="/fix-footer-overlap.js?v=1.0.1"></script>
</body>
</html>
