<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–æ–Ω—Ç–∞–∫—Ç—ã ‚Äî Albamount</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <meta name="csrf-token" content="<%= typeof csrfToken !== 'undefined' ? csrfToken : '' %>">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css?v=1.0.1">
  <link rel="stylesheet" href="/header-tabs.css?v=1.0.1">
</head>
<body>
  <div id="bg-animated" aria-hidden="true"></div>
  <!-- –û–¥–Ω–æ—ç—Ç–∞–∂–Ω—ã–π header –±–µ–∑ –≤–∫–ª–∞–¥–æ–∫ -->
  <header class="main-header">
    <div class="container header-inner">
      <a class="logo" href="/"><img src="/albamount.png" alt="ALBAMOUNT" class="logo-img"></a>
      <div class="header-actions">
        <% if (isAuth) { %>
          <% if (isAdmin) { %>
            <a class="btn outline" href="/admin">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a>
          <% } else { %>
            <a class="btn outline" href="/cabinet">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
          <% } %>
        <% } else { %>
          <a class="btn outline" href="/user/login">–í—Ö–æ–¥</a>
          <button id="openRegister" type="button" class="btn outline">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        <% } %>
      </div>
    </div>
  </header>

  <main>
    <!-- –û–°–ù–û–í–ù–ê–Ø –°–ï–ö–¶–ò–Ø –ö–û–ù–¢–ê–ö–¢–û–í -->
    <section id="contacts" class="section contacts-section">
      <div class="section-header">
        <h2>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏</h2>
        <p class="contacts-description">
          –ú—ã –≤—Å–µ–≥–¥–∞ —Ä–∞–¥—ã –ø–æ–º–æ—á—å –≤–∞–º –∏ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã. 
          –í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–≤—è–∑–∏ –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
        </p>
      </div>

      <div class="contacts-content">
        <div class="contacts-grid">
          <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
          <div class="contact-info">
            <h3>üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <div class="contact-cards">
              <% if (typeof contacts !== 'undefined' && contacts.length > 0) { %>
                <% contacts.forEach(c => { %>
                  <div class="contact-card">
                    <div class="contact-icon">üìß</div>
                    <div class="contact-details">
                      <h4><%= c.type.charAt(0).toUpperCase() + c.type.slice(1) %>:</h4> 
                      <p><a href="mailto:<%= c.email %>"><%= c.email %></a></p>
                      <% if (c.phone) { %>
                        <span>–¢–µ–ª–µ—Ñ–æ–Ω: <%= c.phone %></span>
                      <% } %>
                      <% if (c.description) { %>
                        <span><%= c.description %></span>
                      <% } %>
                    </div>
                  </div>
                <% }) %>
              <% } else { %>
                <div class="contact-card">
                  <div class="contact-icon">üìß</div>
                  <div class="contact-details">
                    <h4>Email</h4>
                    <p>admin@albamount.xyz</p>
                    <span>–û—Å–Ω–æ–≤–Ω–æ–π email –¥–ª—è –æ–±—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤</span>
                  </div>
                </div>

                <div class="contact-card">
                  <div class="contact-icon">üí¨</div>
                  <div class="contact-details">
                    <h4>Telegram</h4>
                    <p>@albamount_support</p>
                  </div>
                </div>
              <% } %>
            </div>
          </div>

          <!-- –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ -->
          <div class="contact-form-section">
            <h3>‚úâÔ∏è –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º</h3>
            <form class="contact-form" id="contactForm">
              <div class="form-group">
                <label for="contact-name">–í–∞—à–µ –∏–º—è *</label>
                <input type="text" id="contact-name" name="name" required placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è">
              </div>
              
              <div class="form-group">
                <label for="contact-email">Email *</label>
                <input type="email" id="contact-email" name="email" required placeholder="your@email.com">
              </div>
              
              <div class="form-group">
                <label for="contact-subject">–¢–µ–º–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è</label>
                <select id="contact-subject" name="subject">
                  <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É</option>
                  <option value="general">–û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã</option>
                  <option value="partnership">–°–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ</option>
                  <option value="technical">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</option>
                  <option value="business">–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</option>
                  <option value="other">–î—Ä—É–≥–æ–µ</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="contact-message">–°–æ–æ–±—â–µ–Ω–∏–µ *</label>
                <textarea id="contact-message" name="message" required rows="5" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ..."></textarea>
              </div>
              
              <button type="submit" class="btn primary contact-submit-btn">
                <span>üì§</span> –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
              </button>
            </form>
            
            <div id="contact-success" class="contact-message success" style="display: none;">
              ‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ! –ú—ã –æ—Ç–≤–µ—Ç–∏–º –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.
            </div>
            
            <div id="contact-error" class="contact-message error" style="display: none;">
              ‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –¥—Ä—É–≥–∏–º —Å–ø–æ—Å–æ–±–æ–º.
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer —Å –≤–∫–ª–∞–¥–∫–∞–º–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ -->
  <footer class="mobile-tabs-footer">
    <div class="mobile-tabs-container">
      <a href="/products" class="mobile-tab-button <%= '' %>">
        –¢–æ–≤–∞—Ä—ã
      </a>
      <a href="/services" class="mobile-tab-button <%= '' %>">
        –£—Å–ª—É–≥–∏
      </a>
      <a href="/videos" class="mobile-tab-button <%= '' %>">
        –í–∏–¥–µ–æ
      </a>
      <a href="/ad" class="mobile-tab-button <%= '' %>">
        –†–µ–∫–ª–∞–º–∞
      </a>
      <a href="/about" class="mobile-tab-button <%= '' %>">
        –û –ù–∞—Å
      </a>
      <a href="/contacts" class="mobile-tab-button active">
        –ö–æ–Ω—Ç–∞–∫—Ç—ã
      </a>
    </div>
  </footer>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
<div id="registerModal" class="modal" aria-hidden="true" style="display:none;">
  <div class="modal-content" role="dialog" aria-modal="true" aria-label="–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è">
    <button class="close" data-close-register aria-label="–ó–∞–∫—Ä—ã—Ç—å">&times;</button>
    <h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
    <form id="registerForm">
      <input type="text" name="username" placeholder="–ù–∏–∫–Ω–µ–π–º" required>
      <input type="email" name="email" placeholder="Email" required>
      <input type="password" name="password" placeholder="–ü–∞—Ä–æ–ª—å" minlength="6" required>
      <button type="submit">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
    </form>
    <div id="registerError" class="error" style="color:#b00020;margin-top:10px;display:none;"></div>
    <div id="registerSuccess" style="color:green;margin-top:10px;display:none;"></div>
  </div>
</div>

<!-- Bootstrap script for safe EJS ‚Üí JS data transfer -->
<script src="/utils/bootstrap.js"></script>
<script>
  window.AppBootstrap.init({
    isAuth: <%- JSON.stringify(typeof isAuth !== 'undefined' ? isAuth : false) %>,
    isAdmin: <%- JSON.stringify(typeof isAdmin !== 'undefined' ? isAdmin : false) %>,
    socketIoAvailable: <%- JSON.stringify(typeof socket_io_available !== 'undefined' ? socket_io_available : false) %>,
    userRole: <%- JSON.stringify(typeof userRole !== 'undefined' ? userRole : null) %>,
    csrfToken: <%- JSON.stringify(typeof csrfToken !== 'undefined' ? csrfToken : '') %>
  });
</script>

<script src="/script.js"></script>

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Ñ—É—Ç–µ—Ä–æ–º -->
<script src="/fix-footer-overlap.js"></script>



<script>
// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
document.addEventListener('DOMContentLoaded', function() {
  const contactForm = document.getElementById('contactForm');
  const successMessage = document.getElementById('contact-success');
  const errorMessage = document.getElementById('contact-error');

  if (contactForm) {
    contactForm.addEventListener('submit', async function(e) {
      e.preventDefault();

      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
      const submitBtn = contactForm.querySelector('.contact-submit-btn');
      const originalText = submitBtn.innerHTML;
      submitBtn.innerHTML = '<span>‚è≥</span> –û—Ç–ø—Ä–∞–≤–∫–∞...';
      submitBtn.disabled = true;

      // –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
      successMessage.style.display = 'none';
      errorMessage.style.display = 'none';

      // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
      const formData = new FormData(contactForm);
      const data = Object.fromEntries(formData.entries());

      try {
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
        const response = await fetch('/contacts/send-message', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-CSRF-Token': '<%= csrfToken %>'
          },
          body: JSON.stringify(data),
          credentials: 'same-origin'
        });

        const result = await response.json();

        if (result.success) {
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
          successMessage.style.display = 'block';
          contactForm.reset();
        } else {
          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
          errorMessage.textContent = result.message || '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.';
          errorMessage.style.display = 'block';
        }
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:', error);
        errorMessage.textContent = '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.';
        errorMessage.style.display = 'block';
      } finally {
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
      }
    });
  }
});
</script>
</body>
</html>
