# –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ Vercel ‚Äî –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º MongoDB

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞: MongoDB –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

**–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:**
```
‚ö†Ô∏è MongoDB –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ (—Å–æ—Å—Ç–æ—è–Ω–∏–µ: 2 = connecting), –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Å—Ç–æ–π –∫–∞—Ç–∞–ª–æ–≥
```

**–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
- `0` = disconnected (–æ—Ç–∫–ª—é—á–µ–Ω–æ)
- `1` = connected (–ø–æ–¥–∫–ª—é—á–µ–Ω–æ) ‚úÖ
- `2` = connecting (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ) ‚ö†Ô∏è **–¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï**
- `3` = disconnecting (–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ)

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

### 1. MONGODB_URI –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Vercel
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è `MONGODB_URI` –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Vercel.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–π—Ç–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Vercel
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–∞–∑–¥–µ–ª "Environment Variables"
3. –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `MONGODB_URI` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è MongoDB Atlas
4. –§–æ—Ä–º–∞—Ç: `mongodb+srv://username:password@cluster.mongodb.net/database?retryWrites=true&w=majority`

### 2. MongoDB Atlas Network Access –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç Vercel
**–ü—Ä–æ–±–ª–µ–º–∞:** MongoDB Atlas –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å IP-–∞–¥—Ä–µ—Å–æ–≤ Vercel.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–π—Ç–∏ –≤ MongoDB Atlas ‚Üí Network Access
2. –î–æ–±–∞–≤–∏—Ç—å IP-–∞–¥—Ä–µ—Å `0.0.0.0/0` (—Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ IP) –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ IP Vercel
3. –ü–æ–¥–æ–∂–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 3. –¢–∞–π–º–∞—É—Ç—ã —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ –¥–ª—è Vercel
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ–∫—É—â–∏–µ —Ç–∞–π–º–∞—É—Ç—ã (10 —Å–µ–∫—É–Ω–¥) –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º–∏ –¥–ª—è —Ö–æ–ª–æ–¥–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ –Ω–∞ Vercel.

**–¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```javascript
serverSelectionTimeoutMS: 10000, // 10 —Å–µ–∫—É–Ω–¥
connectTimeoutMS: 10000, // 10 —Å–µ–∫—É–Ω–¥
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è production:
```javascript
serverSelectionTimeoutMS: 30000, // 30 —Å–µ–∫—É–Ω–¥
connectTimeoutMS: 30000, // 30 —Å–µ–∫—É–Ω–¥
```

### 4. –ü—Ä–æ–±–ª–µ–º—ã —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π username/password –≤ MONGODB_URI.

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Å—Ç—Ä–æ–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ Vercel
2. ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è (script.js, styles.css)
3. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è (200 —Å—Ç–∞—Ç—É—Å)
4. ‚úÖ Graceful degradation: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ë–î, –ø–æ–∫–∞–∑—ã–≤–∞—è –ø—É—Å—Ç–æ–π –∫–∞—Ç–∞–ª–æ–≥

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Vercel:**
   - Settings ‚Üí Environment Variables
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `MONGODB_URI` –¥–æ–±–∞–≤–ª–µ–Ω –¥–ª—è –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (Production, Preview, Development)

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Network Access –≤ MongoDB Atlas:**
   - –†–∞–∑—Ä–µ—à–∏—Ç—å IP `0.0.0.0/0` –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å IP Vercel

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
   - –§–æ—Ä–º–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å: `mongodb+srv://username:password@cluster.mongodb.net/database?retryWrites=true&w=majority`
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ username –∏ password –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

### –£–ª—É—á—à–µ–Ω–∏—è –∫–æ–¥–∞:

1. **–£–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è production:**
   ```javascript
   const isProduction = process.env.NODE_ENV === 'production';
   mongoose.connect(mongoUri, {
     serverSelectionTimeoutMS: isProduction ? 30000 : 10000,
     connectTimeoutMS: isProduction ? 30000 : 10000,
     // ...
   });
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —Å –¥–µ—Ç–∞–ª—è–º–∏

3. **–î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è:
```
‚úÖ MongoDB –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
üìä –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: 1 (1=connected)
üìä –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: <database_name>
```

–ò –∫–∞—Ç–∞–ª–æ–≥ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –≤–º–µ—Å—Ç–æ –ø—É—Å—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

