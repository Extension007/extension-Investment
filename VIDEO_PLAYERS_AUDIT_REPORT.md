# üìä –û–¢–ß–ï–¢: –ê—É–¥–∏—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∏–¥–µ–æ-–ø–ª–µ–µ—Ä–æ–≤ (YouTube, VK, Instagram)

**–î–∞—Ç–∞:** 2025-01-27  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –ê–Ω–∞–ª–∏–∑ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–¥–∞

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#—Ç–µ–∫—É—â–µ–µ-—Å–æ—Å—Ç–æ—è–Ω–∏–µ-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
2. [–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è](#–Ω–∞–π–¥–µ–Ω–Ω—ã–µ-–ø—Ä–æ–±–ª–µ–º—ã-–∏-–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è)
3. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
4. [–í—ã–≤–æ–¥—ã](#–≤—ã–≤–æ–¥—ã)

---

## üîç –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

#### 1.1. –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã

**–§–∞–π–ª:** `public/script.js`
- ‚úÖ **–û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** - —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é –ª–æ–≥–∏–∫—É –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç YouTube IFrame API (`YT.Player`)
- ‚úÖ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

**–§–∞–π–ª—ã:** `views/index.ejs`, `views/admin.ejs`, `views/cabinet.ejs`
- ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** - –≤ `admin.ejs` –∏ `cabinet.ejs` –µ—Å—Ç—å inline-—Å–∫—Ä–∏–ø—Ç—ã —Å —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
- ‚ö†Ô∏è –í `admin.ejs` –∏ `cabinet.ejs` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ–π iframe **–ë–ï–ó** YouTube IFrame API
- ‚úÖ –í `index.ejs` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è YouTube IFrame API —Å–∫—Ä–∏–ø—Ç

**–§–∞–π–ª:** `public/styles.css`
- ‚úÖ –°—Ç–∏–ª–∏ –¥–ª—è overlay –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –º–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö aspect-ratio –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤–∏–¥–µ–æ

---

### 2. YouTube —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### 2.1. API –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π API:**
- ‚úÖ YouTube IFrame API (`YT.Player`) - –≤ `public/script.js`
- ‚ö†Ô∏è –ü—Ä–æ—Å—Ç–æ–π iframe - –≤ `views/admin.ejs` –∏ `views/cabinet.ejs` (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã YT.Player (–≤ `public/script.js`):**
```javascript
playerVars: {
  'playsinline': 1,        // ‚úÖ iOS –ø–æ–¥–¥–µ—Ä–∂–∫–∞
  'controls': 1,           // ‚úÖ –ö–Ω–æ–ø–∫–∞ Play –≤–∏–¥–Ω–∞
  'rel': 0,                // ‚úÖ –°–∫—Ä—ã—Ç—å –ø–æ—Ö–æ–∂–∏–µ –≤–∏–¥–µ–æ
  'enablejsapi': 1,        // ‚úÖ –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∏ 153
  'origin': window.location.origin,  // ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
  'modestbranding': 1      // ‚úÖ –ú–µ–Ω—å—à–µ –±—Ä–µ–Ω–¥–∏–Ω–≥–∞
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ—Å—Ç–æ–≥–æ iframe (–≤ `admin.ejs`/`cabinet.ejs`):**
```javascript
// ‚ö†Ô∏è –û–¢–°–£–¢–°–¢–í–£–ï–¢ enablejsapi=1
embedUrl = `https://www.youtube.com/embed/${videoId}?playsinline=1&controls=1&rel=0&origin=${origin}`;
```

#### 2.2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

**–°–æ–±—ã—Ç–∏—è YouTube IFrame API (–≤ `public/script.js`):**

1. **`onReady`**
   - ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ø–ª–µ–µ—Ä–∞
   - ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–ª–µ–µ—Ä–∞
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–∑–º–µ—Ä—ã –∏ —Å—Ç–∏–ª–∏ iframe
   - ‚úÖ –ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ (–ª—É—á—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞)

2. **`onError`**
   - ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫ YouTube (2, 5, 100, 101, 150, 153)
   - ‚úÖ **–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ 153:**
     - –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –æ—à–∏–±–∫—É
     - –ü—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ø–ª–µ–µ—Ä —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
     - –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–∏–¥–µ–æ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ YouTube
   - ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—à–∏–±–∫–µ
   - ‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–∏–¥–µ–æ –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ

3. **`onStateChange`**
   - ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è (ENDED, PLAYING, PAUSED, BUFFERING, CUED)
   - ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç —Ñ–ª–∞–≥–∏ `isPlaying` –∏ `isPaused`
   - ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

#### 2.3. –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫

**–§–ª–∞–≥–∏ –∑–∞—â–∏—Ç—ã:**
```javascript
let isVideoOpening = false;  // ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ openVideoOverlay
let isPlaying = false;       // ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ play()
let isPaused = false;        // ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ pause()
```

**–ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–ª–µ–µ—Ä–∞:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `videoId` –∏ `videoIframeContainer`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ overlay (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–∏–º)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å > 0)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ YouTube IFrame API (–æ–∂–∏–¥–∞–Ω–∏–µ –¥–æ 5 —Å–µ–∫—É–Ω–¥)
- ‚úÖ –£–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–ª–µ–µ—Ä–∞ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ

**Fallback –º–µ—Ö–∞–Ω–∏–∑–º:**
- ‚úÖ –ï—Å–ª–∏ YouTube IFrame API –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ–π iframe —Å `enablejsapi=1`
- ‚úÖ –ï—Å–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞ –Ω–µ —É–¥–∞–ª–æ—Å—å - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤–∏–¥–µ–æ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ YouTube

#### 2.4. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ videoId

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã URL:**
- ‚úÖ `https://www.youtube.com/watch?v=VIDEO_ID`
- ‚úÖ `https://youtu.be/VIDEO_ID`
- ‚úÖ `https://www.youtube.com/embed/VIDEO_ID`
- ‚úÖ `https://www.youtube.com/shorts/VIDEO_ID` (YouTube Shorts)
- ‚úÖ `https://youtube.com/shorts/VIDEO_ID`
- ‚úÖ `https://m.youtube.com/shorts/VIDEO_ID`
- ‚úÖ `https://m.youtube.com/watch?v=VIDEO_ID`

**–§—É–Ω–∫—Ü–∏—è:** `extractVideoId(url)` - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã

---

### 3. VK —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### 3.1. API –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π API:**
- ‚ö†Ô∏è –ü—Ä–æ—Å—Ç–æ–π iframe (VK –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç JavaScript API)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```javascript
iframe.setAttribute('frameborder', '0');
iframe.setAttribute('scrolling', 'no');
iframe.setAttribute('allow', 'fullscreen');
```

**URL —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```javascript
// –î–ª—è video: https://vk.com/video_ext.php?oid={ownerId}&id={videoId}&hash={timestamp}&hd=1
// –î–ª—è clip: https://vk.com/video_ext.php?oid={ownerId}&id={videoId}&hash={timestamp}&hd=1
```

#### 3.2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã URL:**
- ‚úÖ `https://vk.com/video{owner_id}_{video_id}`
- ‚úÖ `https://vk.com/video?z=video{owner_id}_{video_id}`
- ‚úÖ `https://vk.com/clip{owner_id}_{clip_id}`
- ‚úÖ `https://vk.com/video_ext.php?oid=...&id=...`

**–§—É–Ω–∫—Ü–∏—è:** `extractVKVideoParams(url)` - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã

#### 3.3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è URL –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `onerror` –¥–ª—è iframe
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `onload` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ Fallback –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤–∏–¥–µ–æ –Ω–∞–ø—Ä—è–º—É—é –ø—Ä–∏ –æ—à–∏–±–∫–µ

---

### 4. Instagram —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### 4.1. API –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π API:**
- ‚úÖ Instagram oEmbed API —á–µ—Ä–µ–∑ backend (`/api/instagram/oembed`)
- ‚úÖ Fallback –Ω–∞ –ø—Ä—è–º–æ–π embed iframe

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã iframe:**
```javascript
iframe.setAttribute('allow', 'encrypted-media; fullscreen; picture-in-picture');
iframe.setAttribute('scrolling', 'no');
iframe.style.minHeight = '600px';  // Instagram —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –≤—ã—Å–æ—Ç—ã
```

**URL —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```javascript
// –ß–µ—Ä–µ–∑ oEmbed API: /api/instagram/oembed?url={encodedUrl}
// Fallback: https://www.instagram.com/p/{postId}/embed/
```

#### 4.2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã URL:**
- ‚úÖ `https://www.instagram.com/p/{post_id}/`
- ‚úÖ `https://www.instagram.com/reel/{reel_id}/`
- ‚úÖ `https://www.instagram.com/tv/{tv_id}/`
- ‚úÖ `https://instagram.com/p/{post_id}/`

**–§—É–Ω–∫—Ü–∏—è:** `extractInstagramPostId(url)` - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã

#### 4.3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è URL –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ –≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞ –∫ API
- ‚úÖ Fallback –Ω–∞ –ø—Ä—è–º–æ–π embed –ø—Ä–∏ –æ—à–∏–±–∫–µ API
- ‚úÖ Fallback –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤–∏–¥–µ–æ –Ω–∞–ø—Ä—è–º—É—é –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –æ—à–∏–±–∫–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ `instagram-container` –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞

---

### 5. Overlay –º–µ—Ö–∞–Ω–∏–∑–º

#### 5.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTML

**–≠–ª–µ–º–µ–Ω—Ç—ã:**
```html
<div id="videoOverlay" class="video-overlay" aria-hidden="true" style="display:none;">
  <div class="video-overlay-container">
    <button class="video-overlay-close" data-close-video>&times;</button>
    <div class="video-overlay-iframe-container" id="videoIframeContainer">
      <!-- iframe —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>
  </div>
</div>
```

**–ü—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤:**
- ‚úÖ `views/index.ejs`
- ‚úÖ `views/admin.ejs`
- ‚úÖ `views/cabinet.ejs`

#### 5.2. CSS —Å—Ç–∏–ª–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏:**
```css
.video-overlay {
  position: fixed;
  inset: 0;
  display: none;
  z-index: 9999;
  background: rgba(0, 0, 0, 0.9);
}

.video-overlay.show {
  display: flex;
}

.video-overlay-container {
  aspect-ratio: 16 / 9;  /* –î–ª—è –æ–±—ã—á–Ω—ã—Ö –≤–∏–¥–µ–æ */
  max-width: 960px;
  min-height: 400px;
}

.video-overlay-container.shorts-container {
  aspect-ratio: 9 / 16;  /* –î–ª—è YouTube Shorts */
  max-width: 400px;
}

.video-overlay-container.instagram-container {
  aspect-ratio: auto;
  min-height: 600px;
}
```

**–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:**
- ‚úÖ –ú–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- ‚úÖ –£–º–µ–Ω—å—à–µ–Ω–∏–µ padding –∏ border-radius –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–∞

#### 5.3. –õ–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è

**–§—É–Ω–∫—Ü–∏—è `openVideoOverlay(videoUrl)`:**
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ (`isVideoOpening`)
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –≤–∏–¥–µ–æ
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ –ü–æ–∫–∞–∑ overlay —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–≥–æ iframe
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å fallback

**–§—É–Ω–∫—Ü–∏—è `closeVideoOverlay()`:**
- ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ YouTube –ø–ª–µ–µ—Ä–∞
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ iframe src
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- ‚úÖ –°–±—Ä–æ—Å –≤—Å–µ—Ö —Ñ–ª–∞–≥–æ–≤
- ‚úÖ –°–∫—Ä—ã—Ç–∏–µ overlay
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ scroll body

**–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π:**
- ‚úÖ –ö–ª–∏–∫ –Ω–∞ overlay (–∑–∞–∫—Ä—ã—Ç–∏–µ)
- ‚úÖ –ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚úÖ –ù–∞–∂–∞—Ç–∏–µ Escape (–∑–∞–∫—Ä—ã—Ç–∏–µ)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏

---

### 6. –ó–∞–≥—Ä—É–∑–∫–∞ YouTube IFrame API

#### 6.1. –í `views/index.ejs`

**–ö–æ–¥ –∑–∞–≥—Ä—É–∑–∫–∏:**
```html
<script>
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
</script>
```

**–ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:**
```javascript
window.onYouTubeIframeAPIReady = function() {
  console.log('‚úÖ YouTube IFrame API –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é');
};
```

#### 6.2. –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ API

**–õ–æ–≥–∏–∫–∞ –≤ `openVideoOverlay()`:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `YT` –∏ `YT.Player`
- ‚úÖ –ï—Å–ª–∏ API –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω - –ø–æ–∫–∞–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –û–∂–∏–¥–∞–Ω–∏–µ –¥–æ 5 —Å–µ–∫—É–Ω–¥ (50 –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–æ 100ms)
- ‚úÖ Fallback –Ω–∞ –ø—Ä–æ—Å—Ç–æ–π iframe, –µ—Å–ª–∏ API –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è

---

## ‚ö†Ô∏è –ù–ê–ô–î–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø

### 1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1.1. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ YouTube –ª–æ–≥–∏–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í `views/admin.ejs` –∏ `views/cabinet.ejs` –µ—Å—Ç—å inline-—Å–∫—Ä–∏–ø—Ç—ã —Å —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π YouTube
- –≠—Ç–∏ —Å–∫—Ä–∏–ø—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–æ—Å—Ç–æ–π iframe **–ë–ï–ó** YouTube IFrame API
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `enablejsapi=1` –≤ embed URL
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π `onReady`, `onError`, `onStateChange`
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–∫–∏ 153

**–§–∞–π–ª—ã:**
- `views/admin.ejs` (—Å—Ç—Ä–æ–∫–∏ ~510-557)
- `views/cabinet.ejs` (—Å—Ç—Ä–æ–∫–∏ ~369-416)

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ö†Ô∏è –û—à–∏–±–∫–∞ 153 –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –≤ admin –∏ cabinet –ø–∞–Ω–µ–ª—è—Ö
- ‚ö†Ô∏è –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `play()`
- ‚ö†Ô∏è –ù–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫
- ‚ö†Ô∏è –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–µ–µ—Ä–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ 153

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- üî¥ **–ö–†–ò–¢–ò–ß–ù–û:** –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–æ–¥ –∏–∑ `admin.ejs` –∏ `cabinet.ejs`
- üî¥ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—É—é –ª–æ–≥–∏–∫—É –∏–∑ `public/script.js`
- üî¥ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ YouTube IFrame API –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–∞—Ö

---

### 2. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 2.1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ CSP (Content Security Policy)

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ, —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ª–∏ CSP –∑–∞–≥—Ä—É–∑–∫—É YouTube IFrame API
- –ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ, —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ª–∏ CSP –∑–∞–≥—Ä—É–∑–∫—É iframe —Å YouTube, VK, Instagram

**–§–∞–π–ª:** `server.js` (—Å—Ç—Ä–æ–∫–∏ ~97-100)
```javascript
app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      // ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ scriptSrc –≤–∫–ª—é—á–∞–µ—Ç 'https://www.youtube.com'
      // ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ frameSrc –≤–∫–ª—é—á–∞–µ—Ç 'https://www.youtube.com', 'https://vk.com', 'https://www.instagram.com'
    }
  }
}));
```

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ö†Ô∏è YouTube IFrame API –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω CSP
- ‚ö†Ô∏è iframe —Å –≤–∏–¥–µ–æ –º–æ–≥—É—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CSP –≤ `server.js`
- ‚ö†Ô∏è –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `scriptSrc` –≤–∫–ª—é—á–∞–µ—Ç `'https://www.youtube.com'`
- ‚ö†Ô∏è –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `frameSrc` –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–æ–º–µ–Ω—ã

---

#### 2.2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ HTTPS

**–ü—Ä–æ–±–ª–µ–º–∞:**
- YouTube IFrame API —Ç—Ä–µ–±—É–µ—Ç HTTPS –≤ production
- Instagram oEmbed API –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å HTTPS
- VK embed –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å HTTPS

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ö†Ô∏è –ù–∞ HTTP –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å YouTube IFrame API
- ‚ö†Ô∏è –ú–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å CORS

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ HTTPS –≤ production
- ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HTTP

---

#### 2.3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–∞–π–º–∞—É—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Instagram oEmbed API –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å
- –ù–µ—Ç —è–≤–Ω–æ–≥–æ —Ç–∞–π–º–∞—É—Ç–∞ –¥–ª—è `fetch()` –∑–∞–ø—Ä–æ—Å–∞

**–§–∞–π–ª:** `public/script.js` (—Å—Ç—Ä–æ–∫–∞ ~116)
```javascript
const response = await fetch(`/api/instagram/oembed?url=${encodeURIComponent(url)}`);
// ‚ö†Ô∏è –ù–µ—Ç —Ç–∞–π–º–∞—É—Ç–∞
```

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ö†Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –¥–æ–ª–≥–æ –∂–¥–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ Instagram –≤–∏–¥–µ–æ
- ‚ö†Ô∏è –ù–µ—Ç fallback –ø—Ä–∏ —Ç–∞–π–º–∞—É—Ç–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∞—É—Ç –¥–ª—è `fetch()` –∑–∞–ø—Ä–æ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10 —Å–µ–∫—É–Ω–¥)
- ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `AbortController` –¥–ª—è –æ—Ç–º–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–∞

---

#### 2.4. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `setInterval` –¥–ª—è –æ–∂–∏–¥–∞–Ω–∏—è YouTube API –º–æ–∂–µ—Ç –Ω–µ –æ—á–∏—Å—Ç–∏—Ç—å—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ overlay
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ overlay –≤—Å–µ –µ—â–µ –æ—Ç–∫—Ä—ã—Ç –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–ª–µ–µ—Ä–∞

**–§–∞–π–ª:** `public/script.js` (—Å—Ç—Ä–æ–∫–∏ ~620-634)
```javascript
const waitForAPI = setInterval(() => {
  // ‚ö†Ô∏è –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ overlay –≤—Å–µ –µ—â–µ –æ—Ç–∫—Ä—ã—Ç
  if (typeof YT !== 'undefined' && typeof YT.Player !== 'undefined') {
    clearInterval(waitForAPI);
    createYouTubeIframe(videoId);
  }
}, 100);
```

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ö†Ô∏è `setInterval` –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è overlay
- ‚ö†Ô∏è –ü–ª–µ–µ—Ä –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å—Å—è –≤ –∑–∞–∫—Ä—ã—Ç–æ–º overlay

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É, —á—Ç–æ overlay –≤—Å–µ –µ—â–µ –æ—Ç–∫—Ä—ã—Ç –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–ª–µ–µ—Ä–∞
- ‚ö†Ô∏è –û—á–∏—â–∞—Ç—å `setInterval` –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ overlay

---

### 3. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö

#### 3.1. iOS (Safari)

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `playsinline=1` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ iOS —á–µ—Ä–µ–∑ `isIOS()` —Ñ—É–Ω–∫—Ü–∏—è
- ‚ö†Ô∏è –ù–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è iOS –≤ –ª–æ–≥–∏–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–µ–µ—Ä–∞

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è Safari –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ (–Ω–æ —ç—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- ‚ö†Ô∏è Safari –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- ‚ö†Ô∏è Safari –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å iframe —Å YouTube, –µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- ‚ö†Ô∏è –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- ‚ö†Ô∏è –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ Play –≤–∏–¥–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –±–µ–∑ –æ—Ç–∫—Ä—ã—Ç–∏—è YouTube –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ

---

#### 3.2. Android (Chrome)

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä `playsinline=1` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã `allow` –¥–ª—è iframe

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è Chrome –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ (–Ω–æ —ç—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- ‚ö†Ô∏è Chrome –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- ‚ö†Ô∏è –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- ‚ö†Ô∏è –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

#### 3.3. Desktop (Chrome, Firefox, Safari, Edge)

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã iframe

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è –ë–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∏ —Ä–µ–∫–ª–∞–º—ã –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å YouTube iframe
- ‚ö†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ –º–æ–≥—É—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- ‚ö†Ô∏è –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∞–º–∏ —Ä–µ–∫–ª–∞–º—ã
- ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ iframe –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è

---

### 4. –û—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏

#### 4.1. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ YouTube

**–û—à–∏–±–∫–∞ 153:**
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `onError` —Å–æ–±—ã—Ç–∏–∏
- ‚úÖ –ü—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ø–ª–µ–µ—Ä
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –≤ `admin.ejs` –∏ `cabinet.ejs` (–Ω–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏)

**–û—à–∏–±–∫–∞ 101/150:**
- ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `onError` —Å–æ–±—ã—Ç–∏–∏
- ‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–∏–¥–µ–æ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ YouTube

**DOMException: play() interrupted by pause():**
- ‚úÖ –ó–∞—â–∏—Ç–∞ —á–µ—Ä–µ–∑ —Ñ–ª–∞–≥–∏ `isPlaying` –∏ `isPaused`
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å, –µ—Å–ª–∏ —Ñ–ª–∞–≥–∏ –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

#### 4.2. –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ CORS

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Instagram oEmbed API –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å CORS –æ—à–∏–±–∫–∏
- VK iframe –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è CORS

**–í–ª–∏—è–Ω–∏–µ:**
- ‚ö†Ô∏è Instagram –≤–∏–¥–µ–æ –º–æ–∂–µ—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è
- ‚ö†Ô∏è VK –≤–∏–¥–µ–æ –º–æ–∂–µ—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CORS –Ω–∞ backend –¥–ª—è Instagram API
- ‚ö†Ô∏è –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ VK —Ä–∞–∑—Ä–µ—à–∞–µ—Ç embed –Ω–∞ –≤–∞—à–µ–º –¥–æ–º–µ–Ω–µ

---

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 1. –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ

#### 1.1. –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

- ‚úÖ **YouTube –æ–±—ã—á–Ω—ã–µ –≤–∏–¥–µ–æ:**
  - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è overlay
  - –ö–Ω–æ–ø–∫–∞ Play –≤–∏–¥–Ω–∞
  - –í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è
  - –ù–µ—Ç –æ—à–∏–±–∫–∏ 153
  - –í–∏–¥–µ–æ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ

- ‚úÖ **YouTube Shorts:**
  - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è videoId
  - Overlay –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π aspect-ratio (9:16)
  - –í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è

- ‚úÖ **VK –≤–∏–¥–µ–æ:**
  - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  - iframe –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
  - –í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è

- ‚úÖ **Instagram Reels:**
  - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è postId
  - oEmbed API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML
  - iframe –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
  - –í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è

#### 1.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫

- ‚úÖ **–û—à–∏–±–∫–∞ 153:**
  - –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
  - –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ YouTube –≤–∏–¥–µ–æ
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ—à–∏–±–∫–∞ 153 –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–ª–µ–µ—Ä –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è

- ‚úÖ **–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ API:**
  - –û—Ç–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
  - –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –æ—Ç–∫—Ä—ã—Ç—å YouTube –≤–∏–¥–µ–æ
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è fallback

- ‚úÖ **–û—à–∏–±–∫–∞ CORS:**
  - –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
  - –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å Instagram –≤–∏–¥–µ–æ
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–µ—Ç CORS –æ—à–∏–±–æ–∫

#### 1.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

- ‚úÖ **iOS (Safari):**
  - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º iPhone/iPad
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–Ω–æ–ø–∫–∞ Play –≤–∏–¥–Ω–∞
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–∏–¥–µ–æ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ

- ‚úÖ **Android (Chrome):**
  - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ overlay –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è

- ‚úÖ **Desktop:**
  - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Chrome, Firefox, Safari, Edge
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### 2. –ß—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω

#### 2.1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

- üî¥ **–£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–æ–¥:**
  - –£–¥–∞–ª–∏—Ç—å inline-—Å–∫—Ä–∏–ø—Ç—ã YouTube –∏–∑ `admin.ejs` –∏ `cabinet.ejs`
  - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–∑ `public/script.js`

- üî¥ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É YouTube IFrame API:**
  - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ API –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–∞—Ö
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `window.onYouTubeIframeAPIReady` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

- üî¥ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å CSP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
  - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `scriptSrc` –≤–∫–ª—é—á–∞–µ—Ç `'https://www.youtube.com'`
  - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `frameSrc` –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–æ–º–µ–Ω—ã:
    - `'https://www.youtube.com'`
    - `'https://vk.com'`
    - `'https://www.instagram.com'`

#### 2.2. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

- ‚úÖ **–í—Å–µ —Ç–∏–ø—ã –≤–∏–¥–µ–æ:**
  - YouTube –æ–±—ã—á–Ω—ã–µ –≤–∏–¥–µ–æ
  - YouTube Shorts
  - VK –≤–∏–¥–µ–æ
  - Instagram Reels

- ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
  - –û—à–∏–±–∫–∞ 153 (–ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–µ–µ—Ä–∞)
  - –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ API (fallback)
  - –û—à–∏–±–∫–∞ CORS (fallback –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–∞–ø—Ä—è–º—É—é)

- ‚úÖ **–ó–∞–∫—Ä—ã—Ç–∏–µ overlay:**
  - –ö–ª–∏–∫ –Ω–∞ overlay
  - –ö–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è
  - –ù–∞–∂–∞—Ç–∏–µ Escape
  - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏

#### 2.3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ API:**
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ YouTube IFrame API –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

- ‚úÖ **–ü–∞–º—è—Ç—å:**
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `setInterval` –æ—á–∏—â–∞–µ—Ç—Å—è
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–ª–µ–µ—Ä —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏

---

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø–æ–≤–ª–∏—è—Ç—å

#### 3.1. HTTPS

**–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è:**
- YouTube IFrame API (—Ç—Ä–µ–±—É–µ—Ç HTTPS –≤ production)
- Instagram oEmbed API (–º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å HTTPS)
- VK embed (–º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å HTTPS)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```javascript
if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost') {
  console.warn('‚ö†Ô∏è –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ HTTPS –≤ production');
}
```

#### 3.2. CSP (Content Security Policy)

**–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è:**
- –ó–∞–≥—Ä—É–∑–∫–∞ YouTube IFrame API —Å–∫—Ä–∏–ø—Ç–∞
- –ó–∞–≥—Ä—É–∑–∫–∞ iframe —Å –≤–∏–¥–µ–æ

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—ã:**
```javascript
contentSecurityPolicy: {
  directives: {
    scriptSrc: [
      "'self'",
      "'unsafe-inline'",  // –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è inline-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ API
      "https://www.youtube.com"  // ‚úÖ –ö–†–ò–¢–ò–ß–ù–û
    ],
    frameSrc: [
      "'self'",
      "https://www.youtube.com",  // ‚úÖ –ö–†–ò–¢–ò–ß–ù–û
      "https://vk.com",           // ‚úÖ –ö–†–ò–¢–ò–ß–ù–û
      "https://www.instagram.com" // ‚úÖ –ö–†–ò–¢–ò–ß–ù–û
    ],
    connectSrc: [
      "'self'",
      "https://www.instagram.com"  // –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Instagram oEmbed API
    ]
  }
}
```

#### 3.3. CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è:**
- Instagram oEmbed API –∑–∞–ø—Ä–æ—Å—ã
- VK embed (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ backend —Ä–∞–∑—Ä–µ—à–∞–µ—Ç CORS –¥–ª—è Instagram API
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ VK —Ä–∞–∑—Ä–µ—à–∞–µ—Ç embed –Ω–∞ –≤–∞—à–µ–º –¥–æ–º–µ–Ω–µ

#### 3.4. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Instagram oEmbed API endpoint –¥–æ—Å—Ç—É–ø–µ–Ω

---

## üìù –í–´–í–û–î–´

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ

1. **–û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ `public/script.js`:**
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç YouTube IFrame API —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
   - ‚úÖ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –æ—à–∏–±–∫–∏, –≤–∫–ª—é—á–∞—è –æ—à–∏–±–∫—É 153
   - ‚úÖ –ò–º–µ–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `play()/pause()`
   - ‚úÖ –ò–º–µ–µ—Ç fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã
   - ‚úÖ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

2. **Overlay –º–µ—Ö–∞–Ω–∏–∑–º:**
   - ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ HTML
   - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ CSS —Å—Ç–∏–ª–∏ —Å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å—é
   - ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
   - ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å
   - ‚úÖ Fallback –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤–∏–¥–µ–æ –Ω–∞–ø—Ä—è–º—É—é
   - ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ 153

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

1. **–ö—Ä–∏—Ç–∏—á–Ω–æ:**
   - üî¥ –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–æ–¥ –∏–∑ `admin.ejs` –∏ `cabinet.ejs`
   - üî¥ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ YouTube IFrame API –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö —à–∞–±–ª–æ–Ω–∞—Ö
   - üî¥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CSP –¥–ª—è –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–æ–º–µ–Ω–æ–≤

2. **–í–∞–∂–Ω–æ:**
   - ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∞—É—Ç –¥–ª—è Instagram oEmbed API –∑–∞–ø—Ä–æ—Å–∞
   - ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É, —á—Ç–æ overlay –æ—Ç–∫—Ä—ã—Ç –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –ø–ª–µ–µ—Ä–∞
   - ‚ö†Ô∏è –û—á–∏—â–∞—Ç—å `setInterval` –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ overlay

3. **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:**
   - ‚ö†Ô∏è –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö iOS –∏ Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
   - ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É HTTPS –≤ production
   - ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ iframe –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è

### üìä –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏**

**–û—Å–Ω–æ–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:** ‚úÖ **–•–æ—Ä–æ—à–∞—è** (–≤ `public/script.js`)  
**–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞:** üî¥ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞** (–≤ `admin.ejs` –∏ `cabinet.ejs`)  
**–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** ‚úÖ **–•–æ—Ä–æ—à–∞—è**  
**–ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫:** ‚úÖ **–•–æ—Ä–æ—à–∞—è**  
**–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:** ‚úÖ **–•–æ—Ä–æ—à–∞—è**

---

## üìå –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:**
   - –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–π –∫–æ–¥ –∏–∑ `admin.ejs` –∏ `cabinet.ejs`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CSP
   - –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É YouTube IFrame API –≤–æ –≤—Å–µ —à–∞–±–ª–æ–Ω—ã

2. **–í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è:**
   - –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∞—É—Ç –¥–ª—è Instagram API
   - –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è overlay
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

3. **–í –±—É–¥—É—â–µ–º:**
   - –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫
   - –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É API

---

**–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** 2025-01-27  
**–í–µ—Ä—Å–∏—è –∫–æ–¥–∞:** –¢–µ–∫—É—â–∞—è (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ–¥–∞—á–µ –≤ Copilot –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞

