# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–æ–¥–∞–ª—å–Ω–æ–º—É –æ–∫–Ω—É —Å –≤–∏–¥–µ–æ

## ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≤–∏–¥–µ–æ YouTube —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö:
- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** (`/`) - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `script.js`
- **–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç** (`/cabinet`) - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** (`/admin`) - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç

## üé¨ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ö–Ω–æ–ø–∫–∞ "–û–±–∑–æ—Ä"
–ö–Ω–æ–ø–∫–∞ —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `data-video` —Å–æ–¥–µ—Ä–∂–∏—Ç URL –≤–∏–¥–µ–æ YouTube:
```html
<button class="btn small" data-video="<%= p.video_url %>">–û–±–∑–æ—Ä</button>
```

### 2. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
–ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É:
1. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞—Ö–æ–¥–∏—Ç –∫–Ω–æ–ø–∫—É —Å `data-video`
2. –ò–∑–≤–ª–µ–∫–∞–µ—Ç URL –≤–∏–¥–µ–æ
3. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç URL –≤ —Ñ–æ—Ä–º–∞—Ç YouTube embed
4. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
5. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤–∏–¥–µ–æ –≤ iframe

### 3. –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- –ó–∞—Ç–µ–º–Ω–µ–Ω–Ω—ã–π —Ñ–æ–Ω (overlay)
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –≤–∏–¥–µ–æ (iframe)
- –ö–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è (√ó)

### 4. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ URL
–§—É–Ω–∫—Ü–∏—è `toYouTubeEmbed` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç—ã:
- `https://www.youtube.com/watch?v=VIDEO_ID`
- `https://youtu.be/VIDEO_ID`
- `https://www.youtube.com/shorts/VIDEO_ID`
- `https://www.youtube.com/embed/VIDEO_ID`

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π —Å capture phase:
```javascript
document.addEventListener("click", (e) => {
  const btn = e.target.closest("[data-video]");
  if (!btn) return;
  
  e.preventDefault();
  e.stopPropagation();
  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ
}, true); // Capture phase –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
```

### –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è:
- –ü–æ –∫–ª–∏–∫—É –Ω–∞ –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è (√ó)
- –ü–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ (–Ω–∞ overlay)
- –ü–æ –Ω–∞–∂–∞—Ç–∏—é –∫–ª–∞–≤–∏—à–∏ Escape

### –ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
–í–∏–¥–µ–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏:
```javascript
const finalUrl = embedUrl + (embedUrl.includes("?") ? "&autoplay=1" : "?autoplay=1");
```

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ:
1. –ù–∞–π–¥–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É —Å –≤–∏–¥–µ–æ
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û–±–∑–æ—Ä"
3. –î–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≤–∏–¥–µ–æ
4. –í–∏–¥–µ–æ –¥–æ–ª–∂–Ω–æ –Ω–∞—á–∞—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –í –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `/cabinet`
2. –ù–∞–π–¥–∏—Ç–µ —Å–≤–æ—é –∫–∞—Ä—Ç–æ—á–∫—É —Å –≤–∏–¥–µ–æ
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û–±–∑–æ—Ä"
4. –î–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≤–∏–¥–µ–æ

### –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `/admin`
2. –ù–∞–π–¥–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É —Å –≤–∏–¥–µ–æ
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–í–∏–¥–µ–æ"
4. –î–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≤–∏–¥–µ–æ

## üêõ –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ –≤–∏–¥–µ–æ –Ω–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)**
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏: `üñ±Ô∏è –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –≤–∏–¥–µ–æ`, `üìπ URL –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–∞`, `üé¨ Embed URL`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤–∏–¥–µ–æ**
   - URL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º YouTube URL
   - –§–æ—Ä–º–∞—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `toYouTubeEmbed`

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ CSP**
   - –í –∫–æ–Ω—Å–æ–ª–∏ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ CSP
   - –ï—Å–ª–∏ –µ—Å—Ç—å, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `server.js`

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ**
   - –≠–ª–µ–º–µ–Ω—Ç `#videoModal` –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å
   - –≠–ª–µ–º–µ–Ω—Ç `#videoFrame` –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ "–û–±–∑–æ—Ä"
- ‚úÖ –í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ YouTube
- ‚úÖ –í–∏–¥–µ–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Å–∞–π—Ç–∞ (–Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ)
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ –∫–ª–∏–∫—É –Ω–∞ √ó, –≤–Ω–µ –æ–∫–Ω–∞ –∏–ª–∏ Escape
- ‚úÖ –í–∏–¥–µ–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ

